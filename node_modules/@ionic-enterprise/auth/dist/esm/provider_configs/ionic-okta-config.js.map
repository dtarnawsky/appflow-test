{"version":3,"file":"ionic-okta-config.js","sourceRoot":"","sources":["../../../src/provider_configs/ionic-okta-config.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,sBAAsB,EAAE,MAAM,6BAA6B,CAAC;AACrE,OAAO,EAAE,SAAS,EAAE,MAAM,cAAc,CAAC;AACzC,OAAO,EAAE,WAAW,EAAE,MAAM,iBAAiB,CAAC;AAG9C,OAAO,EAAE,QAAQ,EAAE,MAAM,aAAa,CAAC;AAEvC,MAAM,OAAO,mBAAoB,SAAQ,sBAAsB;IAC7D,YACE,OAAyB,EACjB,eAAkD;QAE1D,KAAK,CAAC,OAAO,CAAC,CAAC;QAFP,oBAAe,GAAf,eAAe,CAAmC;IAG5D,CAAC;IAED,4FAA4F;IAC5F,KAAK,CAAC,YAAY;QAChB,MAAM,IAAI,CAAC,aAAa,EAAE,CAAC;QAE3B,IAAI,KAAyB,CAAC;QAC9B,IAAI;YACF,KAAK,GAAG,MAAM,IAAI,CAAC,eAAe,EAAE,CAAC;SACtC;QAAC,OAAO,CAAC,EAAE;YACV,MAAM,IAAI,KAAK,CAAC,QAAQ,CAAC,+BAA+B,CAAC,CAAC;SAC3D;QAED,MAAM,OAAO,GAAG;YACd,WAAW,EAAE,KAAK;YAClB,qBAAqB,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS;SAC9C,CAAC;QAEF,OAAO,SAAS,CAAC,QAAQ,CACvB,IAAI,CAAC,SAAS,CAAC,sBAAsB,CAAC,EACtC,WAAW,CAAC,UAAU,CAAC,OAAO,CAAC,CAChC,CAAC;IACJ,CAAC;CACF","sourcesContent":["import { IonicGeneralAuthConfig } from './ionic-general-auth-config';\nimport { UrlHelper } from '../urlHelper';\nimport { OAuthPacker } from '../oauth-packer';\nimport { UrlInfo } from '../UrlInfo';\nimport { IonicAuthOptions } from '../interfaces';\nimport { messages } from '../messages';\n\nexport class IonicOktaAuthConfig extends IonicGeneralAuthConfig {\n  constructor(\n    options: IonicAuthOptions,\n    private onGetRawIdToken: () => Promise<string | undefined>,\n  ) {\n    super(options);\n  }\n\n  // OKTA doesn't have a logout_endpoint in their config, rather they use end_session_endpoint\n  async getLogoutUrl(): Promise<UrlInfo> {\n    await this.loadLocations();\n\n    let token: string | undefined;\n    try {\n      token = await this.onGetRawIdToken();\n    } catch (e) {\n      throw new Error(messages.LOGOUT_UNABLE_TO_RETRIEVE_TOKEN);\n    }\n\n    const options = {\n      idTokenHint: token,\n      postLogoutRedirectUri: this.options.logoutUrl,\n    };\n\n    return UrlHelper.buildUrl(\n      this.locations['end_session_endpoint'],\n      OAuthPacker.packParams(options),\n    );\n  }\n}\n"]}