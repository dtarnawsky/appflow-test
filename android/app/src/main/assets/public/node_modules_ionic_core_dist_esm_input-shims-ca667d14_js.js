"use strict";
(self["webpackChunkapp"] = self["webpackChunkapp"] || []).push([["node_modules_ionic_core_dist_esm_input-shims-ca667d14_js"],{

/***/ 5507:
/*!*******************************************************************!*\
  !*** ./node_modules/@ionic/core/dist/esm/input-shims-ca667d14.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "startInputShims": () => (/* binding */ startInputShims)
/* harmony export */ });
/* harmony import */ var _Users_damian_Sample_Code_iv_test_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 1670);
/* harmony import */ var _index_5d0c8232_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index-5d0c8232.js */ 3081);
/* harmony import */ var _helpers_3b390e48_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./helpers-3b390e48.js */ 9259);
/* harmony import */ var _index_c4b11676_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./index-c4b11676.js */ 9273);


/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */



const cloneMap = new WeakMap();

const relocateInput = (componentEl, inputEl, shouldRelocate, inputRelativeY = 0, disabledClonedInput = false) => {
  if (cloneMap.has(componentEl) === shouldRelocate) {
    return;
  }

  if (shouldRelocate) {
    addClone(componentEl, inputEl, inputRelativeY, disabledClonedInput);
  } else {
    removeClone(componentEl, inputEl);
  }
};

const isFocused = input => {
  return input === input.getRootNode().activeElement;
};

const addClone = (componentEl, inputEl, inputRelativeY, disabledClonedInput = false) => {
  // this allows for the actual input to receive the focus from
  // the user's touch event, but before it receives focus, it
  // moves the actual input to a location that will not screw
  // up the app's layout, and does not allow the native browser
  // to attempt to scroll the input into place (messing up headers/footers)
  // the cloned input fills the area of where native input should be
  // while the native input fakes out the browser by relocating itself
  // before it receives the actual focus event
  // We hide the focused input (with the visible caret) invisible by making it scale(0),
  const parentEl = inputEl.parentNode; // DOM WRITES

  const clonedEl = inputEl.cloneNode(false);
  clonedEl.classList.add('cloned-input');
  clonedEl.tabIndex = -1;
  /**
   * Making the cloned input disabled prevents
   * Chrome for Android from still scrolling
   * the entire page since this cloned input
   * will briefly be hidden by the keyboard
   * even though it is not focused.
   *
   * This is not needed on iOS. While this
   * does not cause functional issues on iOS,
   * the input still appears slightly dimmed even
   * if we set opacity: 1.
   */

  if (disabledClonedInput) {
    clonedEl.disabled = true;
  }

  parentEl.appendChild(clonedEl);
  cloneMap.set(componentEl, clonedEl);
  const doc = componentEl.ownerDocument;
  const tx = doc.dir === 'rtl' ? 9999 : -9999;
  componentEl.style.pointerEvents = 'none';
  inputEl.style.transform = `translate3d(${tx}px,${inputRelativeY}px,0) scale(0)`;
};

const removeClone = (componentEl, inputEl) => {
  const clone = cloneMap.get(componentEl);

  if (clone) {
    cloneMap.delete(componentEl);
    clone.remove();
  }

  componentEl.style.pointerEvents = '';
  inputEl.style.transform = '';
};

const enableHideCaretOnScroll = (componentEl, inputEl, scrollEl) => {
  if (!scrollEl || !inputEl) {
    return () => {
      return;
    };
  }

  const scrollHideCaret = shouldHideCaret => {
    if (isFocused(inputEl)) {
      relocateInput(componentEl, inputEl, shouldHideCaret);
    }
  };

  const onBlur = () => relocateInput(componentEl, inputEl, false);

  const hideCaret = () => scrollHideCaret(true);

  const showCaret = () => scrollHideCaret(false);

  (0,_helpers_3b390e48_js__WEBPACK_IMPORTED_MODULE_2__.a)(scrollEl, 'ionScrollStart', hideCaret);
  (0,_helpers_3b390e48_js__WEBPACK_IMPORTED_MODULE_2__.a)(scrollEl, 'ionScrollEnd', showCaret);
  inputEl.addEventListener('blur', onBlur);
  return () => {
    (0,_helpers_3b390e48_js__WEBPACK_IMPORTED_MODULE_2__.b)(scrollEl, 'ionScrollStart', hideCaret);
    (0,_helpers_3b390e48_js__WEBPACK_IMPORTED_MODULE_2__.b)(scrollEl, 'ionScrollEnd', showCaret);
    inputEl.addEventListener('ionBlur', onBlur);
  };
};

const SKIP_SELECTOR = 'input, textarea, [no-blur], [contenteditable]';

const enableInputBlurring = () => {
  let focused = true;
  let didScroll = false;
  const doc = document;

  const onScroll = () => {
    didScroll = true;
  };

  const onFocusin = () => {
    focused = true;
  };

  const onTouchend = ev => {
    // if app did scroll return early
    if (didScroll) {
      didScroll = false;
      return;
    }

    const active = doc.activeElement;

    if (!active) {
      return;
    } // only blur if the active element is a text-input or a textarea


    if (active.matches(SKIP_SELECTOR)) {
      return;
    } // if the selected target is the active element, do not blur


    const tapped = ev.target;

    if (tapped === active) {
      return;
    }

    if (tapped.matches(SKIP_SELECTOR) || tapped.closest(SKIP_SELECTOR)) {
      return;
    }

    focused = false; // TODO FW-2796: find a better way, why 50ms?

    setTimeout(() => {
      if (!focused) {
        active.blur();
      }
    }, 50);
  };

  (0,_helpers_3b390e48_js__WEBPACK_IMPORTED_MODULE_2__.a)(doc, 'ionScrollStart', onScroll);
  doc.addEventListener('focusin', onFocusin, true);
  doc.addEventListener('touchend', onTouchend, false);
  return () => {
    (0,_helpers_3b390e48_js__WEBPACK_IMPORTED_MODULE_2__.b)(doc, 'ionScrollStart', onScroll, true);
    doc.removeEventListener('focusin', onFocusin, true);
    doc.removeEventListener('touchend', onTouchend, false);
  };
};

const SCROLL_ASSIST_SPEED = 0.3;

const getScrollData = (componentEl, contentEl, keyboardHeight) => {
  var _a;

  const itemEl = (_a = componentEl.closest('ion-item,[ion-item]')) !== null && _a !== void 0 ? _a : componentEl;
  return calcScrollData(itemEl.getBoundingClientRect(), contentEl.getBoundingClientRect(), keyboardHeight, componentEl.ownerDocument.defaultView.innerHeight);
};

const calcScrollData = (inputRect, contentRect, keyboardHeight, platformHeight) => {
  // compute input's Y values relative to the body
  const inputTop = inputRect.top;
  const inputBottom = inputRect.bottom; // compute visible area

  const visibleAreaTop = contentRect.top;
  const visibleAreaBottom = Math.min(contentRect.bottom, platformHeight - keyboardHeight); // compute safe area

  const safeAreaTop = visibleAreaTop + 15;
  const safeAreaBottom = visibleAreaBottom * 0.75; // figure out if each edge of the input is within the safe area

  const distanceToBottom = safeAreaBottom - inputBottom;
  const distanceToTop = safeAreaTop - inputTop; // desiredScrollAmount is the negated distance to the safe area according to our calculations.

  const desiredScrollAmount = Math.round(distanceToBottom < 0 ? -distanceToBottom : distanceToTop > 0 ? -distanceToTop : 0); // our calculations make some assumptions that aren't always true, like the keyboard being closed when an input
  // gets focus, so make sure we don't scroll the input above the visible area

  const scrollAmount = Math.min(desiredScrollAmount, inputTop - visibleAreaTop);
  const distance = Math.abs(scrollAmount);
  const duration = distance / SCROLL_ASSIST_SPEED;
  const scrollDuration = Math.min(400, Math.max(150, duration));
  return {
    scrollAmount,
    scrollDuration,
    scrollPadding: keyboardHeight,
    inputSafeY: -(inputTop - safeAreaTop) + 4
  };
};

const enableScrollAssist = (componentEl, inputEl, contentEl, footerEl, keyboardHeight, disableClonedInput = false) => {
  let coord;

  const touchStart = ev => {
    coord = (0,_helpers_3b390e48_js__WEBPACK_IMPORTED_MODULE_2__.p)(ev);
  };

  const touchEnd = ev => {
    // input cover touchend/mouseup
    if (!coord) {
      return;
    } // get where the touchend/mouseup ended


    const endCoord = (0,_helpers_3b390e48_js__WEBPACK_IMPORTED_MODULE_2__.p)(ev); // focus this input if the pointer hasn't moved XX pixels
    // and the input doesn't already have focus

    if (!hasPointerMoved(6, coord, endCoord) && !isFocused(inputEl)) {
      // begin the input focus process
      jsSetFocus(componentEl, inputEl, contentEl, footerEl, keyboardHeight, disableClonedInput);
    }
  };

  componentEl.addEventListener('touchstart', touchStart, {
    capture: true,
    passive: true
  });
  componentEl.addEventListener('touchend', touchEnd, true);
  return () => {
    componentEl.removeEventListener('touchstart', touchStart, true);
    componentEl.removeEventListener('touchend', touchEnd, true);
  };
};

const jsSetFocus = /*#__PURE__*/function () {
  var _ref = (0,_Users_damian_Sample_Code_iv_test_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (componentEl, inputEl, contentEl, footerEl, keyboardHeight, disableClonedInput = false) {
    if (!contentEl && !footerEl) {
      return;
    }

    const scrollData = getScrollData(componentEl, contentEl || footerEl, keyboardHeight);

    if (contentEl && Math.abs(scrollData.scrollAmount) < 4) {
      // the text input is in a safe position that doesn't
      // require it to be scrolled into view, just set focus now
      inputEl.focus();
      return;
    } // temporarily move the focus to the focus holder so the browser
    // doesn't freak out while it's trying to get the input in place
    // at this point the native text input still does not have focus


    relocateInput(componentEl, inputEl, true, scrollData.inputSafeY, disableClonedInput);
    inputEl.focus();
    /**
     * Relocating/Focusing input causes the
     * click event to be cancelled, so
     * manually fire one here.
     */

    (0,_helpers_3b390e48_js__WEBPACK_IMPORTED_MODULE_2__.r)(() => componentEl.click());

    if (typeof window !== 'undefined') {
      let scrollContentTimeout;

      const scrollContent = /*#__PURE__*/function () {
        var _ref2 = (0,_Users_damian_Sample_Code_iv_test_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
          // clean up listeners and timeouts
          if (scrollContentTimeout !== undefined) {
            clearTimeout(scrollContentTimeout);
          }

          window.removeEventListener('ionKeyboardDidShow', doubleKeyboardEventListener);
          window.removeEventListener('ionKeyboardDidShow', scrollContent); // scroll the input into place

          if (contentEl) {
            yield (0,_index_5d0c8232_js__WEBPACK_IMPORTED_MODULE_1__.c)(contentEl, 0, scrollData.scrollAmount, scrollData.scrollDuration);
          } // the scroll view is in the correct position now
          // give the native text input focus


          relocateInput(componentEl, inputEl, false, scrollData.inputSafeY); // ensure this is the focused input

          inputEl.focus();
        });

        return function scrollContent() {
          return _ref2.apply(this, arguments);
        };
      }();

      const doubleKeyboardEventListener = () => {
        window.removeEventListener('ionKeyboardDidShow', doubleKeyboardEventListener);
        window.addEventListener('ionKeyboardDidShow', scrollContent);
      };

      if (contentEl) {
        const scrollEl = yield (0,_index_5d0c8232_js__WEBPACK_IMPORTED_MODULE_1__.g)(contentEl);
        /**
         * scrollData will only consider the amount we need
         * to scroll in order to properly bring the input
         * into view. It will not consider the amount
         * we can scroll in the content element.
         * As a result, scrollData may request a greater
         * scroll position than is currently available
         * in the DOM. If this is the case, we need to
         * wait for the webview to resize/the keyboard
         * to show in order for additional scroll
         * bandwidth to become available.
         */

        const totalScrollAmount = scrollEl.scrollHeight - scrollEl.clientHeight;

        if (scrollData.scrollAmount > totalScrollAmount - scrollEl.scrollTop) {
          /**
           * On iOS devices, the system will show a "Passwords" bar above the keyboard
           * after the initial keyboard is shown. This prevents the webview from resizing
           * until the "Passwords" bar is shown, so we need to wait for that to happen first.
           */
          if (inputEl.type === 'password') {
            // Add 50px to account for the "Passwords" bar
            scrollData.scrollAmount += 50;
            window.addEventListener('ionKeyboardDidShow', doubleKeyboardEventListener);
          } else {
            window.addEventListener('ionKeyboardDidShow', scrollContent);
          }
          /**
           * This should only fire in 2 instances:
           * 1. The app is very slow.
           * 2. The app is running in a browser on an old OS
           * that does not support Ionic Keyboard Events
           */


          scrollContentTimeout = setTimeout(scrollContent, 1000);
          return;
        }
      }

      scrollContent();
    }
  });

  return function jsSetFocus(_x, _x2, _x3, _x4, _x5) {
    return _ref.apply(this, arguments);
  };
}();

const hasPointerMoved = (threshold, startCoord, endCoord) => {
  if (startCoord && endCoord) {
    const deltaX = startCoord.x - endCoord.x;
    const deltaY = startCoord.y - endCoord.y;
    const distance = deltaX * deltaX + deltaY * deltaY;
    return distance > threshold * threshold;
  }

  return false;
};

const PADDING_TIMER_KEY = '$ionPaddingTimer';

const enableScrollPadding = keyboardHeight => {
  const doc = document;

  const onFocusin = ev => {
    setScrollPadding(ev.target, keyboardHeight);
  };

  const onFocusout = ev => {
    setScrollPadding(ev.target, 0);
  };

  doc.addEventListener('focusin', onFocusin);
  doc.addEventListener('focusout', onFocusout);
  return () => {
    doc.removeEventListener('focusin', onFocusin);
    doc.removeEventListener('focusout', onFocusout);
  };
};

const setScrollPadding = (input, keyboardHeight) => {
  var _a, _b;

  if (input.tagName !== 'INPUT') {
    return;
  }

  if (input.parentElement && input.parentElement.tagName === 'ION-INPUT') {
    return;
  }

  if (((_b = (_a = input.parentElement) === null || _a === void 0 ? void 0 : _a.parentElement) === null || _b === void 0 ? void 0 : _b.tagName) === 'ION-SEARCHBAR') {
    return;
  }

  const el = (0,_index_5d0c8232_js__WEBPACK_IMPORTED_MODULE_1__.f)(input);

  if (el === null) {
    return;
  }

  const timer = el[PADDING_TIMER_KEY];

  if (timer) {
    clearTimeout(timer);
  }

  if (keyboardHeight > 0) {
    el.style.setProperty('--keyboard-offset', `${keyboardHeight}px`);
  } else {
    el[PADDING_TIMER_KEY] = setTimeout(() => {
      el.style.setProperty('--keyboard-offset', '0px');
    }, 120);
  }
};

const INPUT_BLURRING = true;
const SCROLL_PADDING = true;

const startInputShims = (config, platform) => {
  const doc = document;
  const isIOS = platform === 'ios';
  const isAndroid = platform === 'android';
  /**
   * Hide Caret and Input Blurring are needed on iOS.
   * Scroll Assist and Scroll Padding are needed on iOS and Android
   * with Chrome web browser (not Chrome webview).
   */

  const keyboardHeight = config.getNumber('keyboardHeight', 290);
  const scrollAssist = config.getBoolean('scrollAssist', true);
  const hideCaret = config.getBoolean('hideCaretOnScroll', isIOS);
  const inputBlurring = config.getBoolean('inputBlurring', isIOS);
  const scrollPadding = config.getBoolean('scrollPadding', true);
  const inputs = Array.from(doc.querySelectorAll('ion-input, ion-textarea'));
  const hideCaretMap = new WeakMap();
  const scrollAssistMap = new WeakMap();

  const registerInput = /*#__PURE__*/function () {
    var _ref3 = (0,_Users_damian_Sample_Code_iv_test_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (componentEl) {
      yield new Promise(resolve => (0,_helpers_3b390e48_js__WEBPACK_IMPORTED_MODULE_2__.c)(componentEl, resolve));
      const inputRoot = componentEl.shadowRoot || componentEl;
      const inputEl = inputRoot.querySelector('input') || inputRoot.querySelector('textarea');
      const scrollEl = (0,_index_5d0c8232_js__WEBPACK_IMPORTED_MODULE_1__.f)(componentEl);
      const footerEl = !scrollEl ? componentEl.closest('ion-footer') : null;

      if (!inputEl) {
        return;
      }

      if (!!scrollEl && hideCaret && !hideCaretMap.has(componentEl)) {
        const rmFn = enableHideCaretOnScroll(componentEl, inputEl, scrollEl);
        hideCaretMap.set(componentEl, rmFn);
      }
      /**
       * date/datetime-locale inputs on mobile devices show date picker
       * overlays instead of keyboards. As a result, scroll assist is
       * not needed. This also works around a bug in iOS <16 where
       * scroll assist causes the browser to lock up. See FW-1997.
       */


      const isDateInput = inputEl.type === 'date' || inputEl.type === 'datetime-local';

      if (!isDateInput && (!!scrollEl || !!footerEl) && scrollAssist && !scrollAssistMap.has(componentEl)) {
        const rmFn = enableScrollAssist(componentEl, inputEl, scrollEl, footerEl, keyboardHeight, isAndroid);
        scrollAssistMap.set(componentEl, rmFn);
      }
    });

    return function registerInput(_x6) {
      return _ref3.apply(this, arguments);
    };
  }();

  const unregisterInput = componentEl => {
    if (hideCaret) {
      const fn = hideCaretMap.get(componentEl);

      if (fn) {
        fn();
      }

      hideCaretMap.delete(componentEl);
    }

    if (scrollAssist) {
      const fn = scrollAssistMap.get(componentEl);

      if (fn) {
        fn();
      }

      scrollAssistMap.delete(componentEl);
    }
  };

  if (inputBlurring && INPUT_BLURRING) {
    enableInputBlurring();
  }

  if (scrollPadding && SCROLL_PADDING) {
    enableScrollPadding(keyboardHeight);
  } // Input might be already loaded in the DOM before ion-device-hacks did.
  // At this point we need to look for all of the inputs not registered yet
  // and register them.


  for (const input of inputs) {
    registerInput(input);
  }

  doc.addEventListener('ionInputDidLoad', ev => {
    registerInput(ev.detail);
  });
  doc.addEventListener('ionInputDidUnload', ev => {
    unregisterInput(ev.detail);
  });
};



/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm9kZV9tb2R1bGVzX2lvbmljX2NvcmVfZGlzdF9lc21faW5wdXQtc2hpbXMtY2E2NjdkMTRfanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBLE1BQU1lLFFBQVEsR0FBRyxJQUFJQyxPQUFKLEVBQWpCOztBQUNBLE1BQU1DLGFBQWEsR0FBRyxDQUFDQyxXQUFELEVBQWNDLE9BQWQsRUFBdUJDLGNBQXZCLEVBQXVDQyxjQUFjLEdBQUcsQ0FBeEQsRUFBMkRDLG1CQUFtQixHQUFHLEtBQWpGLEtBQTJGO0VBQy9HLElBQUlQLFFBQVEsQ0FBQ1EsR0FBVCxDQUFhTCxXQUFiLE1BQThCRSxjQUFsQyxFQUFrRDtJQUNoRDtFQUNEOztFQUNELElBQUlBLGNBQUosRUFBb0I7SUFDbEJJLFFBQVEsQ0FBQ04sV0FBRCxFQUFjQyxPQUFkLEVBQXVCRSxjQUF2QixFQUF1Q0MsbUJBQXZDLENBQVI7RUFDRCxDQUZELE1BR0s7SUFDSEcsV0FBVyxDQUFDUCxXQUFELEVBQWNDLE9BQWQsQ0FBWDtFQUNEO0FBQ0YsQ0FWRDs7QUFXQSxNQUFNTyxTQUFTLEdBQUlDLEtBQUQsSUFBVztFQUMzQixPQUFPQSxLQUFLLEtBQUtBLEtBQUssQ0FBQ0MsV0FBTixHQUFvQkMsYUFBckM7QUFDRCxDQUZEOztBQUdBLE1BQU1MLFFBQVEsR0FBRyxDQUFDTixXQUFELEVBQWNDLE9BQWQsRUFBdUJFLGNBQXZCLEVBQXVDQyxtQkFBbUIsR0FBRyxLQUE3RCxLQUF1RTtFQUN0RjtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQSxNQUFNUSxRQUFRLEdBQUdYLE9BQU8sQ0FBQ1ksVUFBekIsQ0FWc0YsQ0FXdEY7O0VBQ0EsTUFBTUMsUUFBUSxHQUFHYixPQUFPLENBQUNjLFNBQVIsQ0FBa0IsS0FBbEIsQ0FBakI7RUFDQUQsUUFBUSxDQUFDRSxTQUFULENBQW1CQyxHQUFuQixDQUF1QixjQUF2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Qk0sYUFBYSxDQUFDNUksS0FBRCxDQUFiO0VBQ0Q7O0VBQ0RhLEdBQUcsQ0FBQ2pDLGdCQUFKLENBQXFCLGlCQUFyQixFQUEwQzJELEVBQUQsSUFBUTtJQUMvQ3FHLGFBQWEsQ0FBQ3JHLEVBQUUsQ0FBQytHLE1BQUosQ0FBYjtFQUNELENBRkQ7RUFHQXpJLEdBQUcsQ0FBQ2pDLGdCQUFKLENBQXFCLG1CQUFyQixFQUE0QzJELEVBQUQsSUFBUTtJQUNqRDZHLGVBQWUsQ0FBQzdHLEVBQUUsQ0FBQytHLE1BQUosQ0FBZjtFQUNELENBRkQ7QUFHRCxDQS9FRCIsInNvdXJjZXMiOlsiLi9ub2RlX21vZHVsZXMvQGlvbmljL2NvcmUvZGlzdC9lc20vaW5wdXQtc2hpbXMtY2E2NjdkMTQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiAoQykgSW9uaWMgaHR0cDovL2lvbmljZnJhbWV3b3JrLmNvbSAtIE1JVCBMaWNlbnNlXG4gKi9cbmltcG9ydCB7IGcgYXMgZ2V0U2Nyb2xsRWxlbWVudCwgYyBhcyBzY3JvbGxCeVBvaW50LCBmIGFzIGZpbmRDbG9zZXN0SW9uQ29udGVudCB9IGZyb20gJy4vaW5kZXgtNWQwYzgyMzIuanMnO1xuaW1wb3J0IHsgYSBhcyBhZGRFdmVudExpc3RlbmVyLCBiIGFzIHJlbW92ZUV2ZW50TGlzdGVuZXIsIHIgYXMgcmFmLCBwIGFzIHBvaW50ZXJDb29yZCwgYyBhcyBjb21wb25lbnRPblJlYWR5IH0gZnJvbSAnLi9oZWxwZXJzLTNiMzkwZTQ4LmpzJztcbmltcG9ydCAnLi9pbmRleC1jNGIxMTY3Ni5qcyc7XG5cbmNvbnN0IGNsb25lTWFwID0gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IHJlbG9jYXRlSW5wdXQgPSAoY29tcG9uZW50RWwsIGlucHV0RWwsIHNob3VsZFJlbG9jYXRlLCBpbnB1dFJlbGF0aXZlWSA9IDAsIGRpc2FibGVkQ2xvbmVkSW5wdXQgPSBmYWxzZSkgPT4ge1xuICBpZiAoY2xvbmVNYXAuaGFzKGNvbXBvbmVudEVsKSA9PT0gc2hvdWxkUmVsb2NhdGUpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKHNob3VsZFJlbG9jYXRlKSB7XG4gICAgYWRkQ2xvbmUoY29tcG9uZW50RWwsIGlucHV0RWwsIGlucHV0UmVsYXRpdmVZLCBkaXNhYmxlZENsb25lZElucHV0KTtcbiAgfVxuICBlbHNlIHtcbiAgICByZW1vdmVDbG9uZShjb21wb25lbnRFbCwgaW5wdXRFbCk7XG4gIH1cbn07XG5jb25zdCBpc0ZvY3VzZWQgPSAoaW5wdXQpID0+IHtcbiAgcmV0dXJuIGlucHV0ID09PSBpbnB1dC5nZXRSb290Tm9kZSgpLmFjdGl2ZUVsZW1lbnQ7XG59O1xuY29uc3QgYWRkQ2xvbmUgPSAoY29tcG9uZW50RWwsIGlucHV0RWwsIGlucHV0UmVsYXRpdmVZLCBkaXNhYmxlZENsb25lZElucHV0ID0gZmFsc2UpID0+IHtcbiAgLy8gdGhpcyBhbGxvd3MgZm9yIHRoZSBhY3R1YWwgaW5wdXQgdG8gcmVjZWl2ZSB0aGUgZm9jdXMgZnJvbVxuICAvLyB0aGUgdXNlcidzIHRvdWNoIGV2ZW50LCBidXQgYmVmb3JlIGl0IHJlY2VpdmVzIGZvY3VzLCBpdFxuICAvLyBtb3ZlcyB0aGUgYWN0dWFsIGlucHV0IHRvIGEgbG9jYXRpb24gdGhhdCB3aWxsIG5vdCBzY3Jld1xuICAvLyB1cCB0aGUgYXBwJ3MgbGF5b3V0LCBhbmQgZG9lcyBub3QgYWxsb3cgdGhlIG5hdGl2ZSBicm93c2VyXG4gIC8vIHRvIGF0dGVtcHQgdG8gc2Nyb2xsIHRoZSBpbnB1dCBpbnRvIHBsYWNlIChtZXNzaW5nIHVwIGhlYWRlcnMvZm9vdGVycylcbiAgLy8gdGhlIGNsb25lZCBpbnB1dCBmaWxscyB0aGUgYXJlYSBvZiB3aGVyZSBuYXRpdmUgaW5wdXQgc2hvdWxkIGJlXG4gIC8vIHdoaWxlIHRoZSBuYXRpdmUgaW5wdXQgZmFrZXMgb3V0IHRoZSBicm93c2VyIGJ5IHJlbG9jYXRpbmcgaXRzZWxmXG4gIC8vIGJlZm9yZSBpdCByZWNlaXZlcyB0aGUgYWN0dWFsIGZvY3VzIGV2ZW50XG4gIC8vIFdlIGhpZGUgdGhlIGZvY3VzZWQgaW5wdXQgKHdpdGggdGhlIHZpc2libGUgY2FyZXQpIGludmlzaWJsZSBieSBtYWtpbmcgaXQgc2NhbGUoMCksXG4gIGNvbnN0IHBhcmVudEVsID0gaW5wdXRFbC5wYXJlbnROb2RlO1xuICAvLyBET00gV1JJVEVTXG4gIGNvbnN0IGNsb25lZEVsID0gaW5wdXRFbC5jbG9uZU5vZGUoZmFsc2UpO1xuICBjbG9uZWRFbC5jbGFzc0xpc3QuYWRkKCdjbG9uZWQtaW5wdXQnKTtcbiAgY2xvbmVkRWwudGFiSW5kZXggPSAtMTtcbiAgLyoqXG4gICAqIE1ha2luZyB0aGUgY2xvbmVkIGlucHV0IGRpc2FibGVkIHByZXZlbnRzXG4gICAqIENocm9tZSBmb3IgQW5kcm9pZCBmcm9tIHN0aWxsIHNjcm9sbGluZ1xuICAgKiB0aGUgZW50aXJlIHBhZ2Ugc2luY2UgdGhpcyBjbG9uZWQgaW5wdXRcbiAgICogd2lsbCBicmllZmx5IGJlIGhpZGRlbiBieSB0aGUga2V5Ym9hcmRcbiAgICogZXZlbiB0aG91Z2ggaXQgaXMgbm90IGZvY3VzZWQuXG4gICAqXG4gICAqIFRoaXMgaXMgbm90IG5lZWRlZCBvbiBpT1MuIFdoaWxlIHRoaXNcbiAgICogZG9lcyBub3QgY2F1c2UgZnVuY3Rpb25hbCBpc3N1ZXMgb24gaU9TLFxuICAgKiB0aGUgaW5wdXQgc3RpbGwgYXBwZWFycyBzbGlnaHRseSBkaW1tZWQgZXZlblxuICAgKiBpZiB3ZSBzZXQgb3BhY2l0eTogMS5cbiAgICovXG4gIGlmIChkaXNhYmxlZENsb25lZElucHV0KSB7XG4gICAgY2xvbmVkRWwuZGlzYWJsZWQgPSB0cnVlO1xuICB9XG4gIHBhcmVudEVsLmFwcGVuZENoaWxkKGNsb25lZEVsKTtcbiAgY2xvbmVNYXAuc2V0KGNvbXBvbmVudEVsLCBjbG9uZWRFbCk7XG4gIGNvbnN0IGRvYyA9IGNvbXBvbmVudEVsLm93bmVyRG9jdW1lbnQ7XG4gIGNvbnN0IHR4ID0gZG9jLmRpciA9PT0gJ3J0bCcgPyA5OTk5IDogLTk5OTk7XG4gIGNvbXBvbmVudEVsLnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnbm9uZSc7XG4gIGlucHV0RWwuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZTNkKCR7dHh9cHgsJHtpbnB1dFJlbGF0aXZlWX1weCwwKSBzY2FsZSgwKWA7XG59O1xuY29uc3QgcmVtb3ZlQ2xvbmUgPSAoY29tcG9uZW50RWwsIGlucHV0RWwpID0+IHtcbiAgY29uc3QgY2xvbmUgPSBjbG9uZU1hcC5nZXQoY29tcG9uZW50RWwpO1xuICBpZiAoY2xvbmUpIHtcbiAgICBjbG9uZU1hcC5kZWxldGUoY29tcG9uZW50RWwpO1xuICAgIGNsb25lLnJlbW92ZSgpO1xuICB9XG4gIGNvbXBvbmVudEVsLnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnJztcbiAgaW5wdXRFbC5zdHlsZS50cmFuc2Zvcm0gPSAnJztcbn07XG5cbmNvbnN0IGVuYWJsZUhpZGVDYXJldE9uU2Nyb2xsID0gKGNvbXBvbmVudEVsLCBpbnB1dEVsLCBzY3JvbGxFbCkgPT4ge1xuICBpZiAoIXNjcm9sbEVsIHx8ICFpbnB1dEVsKSB7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHJldHVybjtcbiAgICB9O1xuICB9XG4gIGNvbnN0IHNjcm9sbEhpZGVDYXJldCA9IChzaG91bGRIaWRlQ2FyZXQpID0+IHtcbiAgICBpZiAoaXNGb2N1c2VkKGlucHV0RWwpKSB7XG4gICAgICByZWxvY2F0ZUlucHV0KGNvbXBvbmVudEVsLCBpbnB1dEVsLCBzaG91bGRIaWRlQ2FyZXQpO1xuICAgIH1cbiAgfTtcbiAgY29uc3Qgb25CbHVyID0gKCkgPT4gcmVsb2NhdGVJbnB1dChjb21wb25lbnRFbCwgaW5wdXRFbCwgZmFsc2UpO1xuICBjb25zdCBoaWRlQ2FyZXQgPSAoKSA9PiBzY3JvbGxIaWRlQ2FyZXQodHJ1ZSk7XG4gIGNvbnN0IHNob3dDYXJldCA9ICgpID0+IHNjcm9sbEhpZGVDYXJldChmYWxzZSk7XG4gIGFkZEV2ZW50TGlzdGVuZXIoc2Nyb2xsRWwsICdpb25TY3JvbGxTdGFydCcsIGhpZGVDYXJldCk7XG4gIGFkZEV2ZW50TGlzdGVuZXIoc2Nyb2xsRWwsICdpb25TY3JvbGxFbmQnLCBzaG93Q2FyZXQpO1xuICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBvbkJsdXIpO1xuICByZXR1cm4gKCkgPT4ge1xuICAgIHJlbW92ZUV2ZW50TGlzdGVuZXIoc2Nyb2xsRWwsICdpb25TY3JvbGxTdGFydCcsIGhpZGVDYXJldCk7XG4gICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcihzY3JvbGxFbCwgJ2lvblNjcm9sbEVuZCcsIHNob3dDYXJldCk7XG4gICAgaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKCdpb25CbHVyJywgb25CbHVyKTtcbiAgfTtcbn07XG5cbmNvbnN0IFNLSVBfU0VMRUNUT1IgPSAnaW5wdXQsIHRleHRhcmVhLCBbbm8tYmx1cl0sIFtjb250ZW50ZWRpdGFibGVdJztcbmNvbnN0IGVuYWJsZUlucHV0Qmx1cnJpbmcgPSAoKSA9PiB7XG4gIGxldCBmb2N1c2VkID0gdHJ1ZTtcbiAgbGV0IGRpZFNjcm9sbCA9IGZhbHNlO1xuICBjb25zdCBkb2MgPSBkb2N1bWVudDtcbiAgY29uc3Qgb25TY3JvbGwgPSAoKSA9PiB7XG4gICAgZGlkU2Nyb2xsID0gdHJ1ZTtcbiAgfTtcbiAgY29uc3Qgb25Gb2N1c2luID0gKCkgPT4ge1xuICAgIGZvY3VzZWQgPSB0cnVlO1xuICB9O1xuICBjb25zdCBvblRvdWNoZW5kID0gKGV2KSA9PiB7XG4gICAgLy8gaWYgYXBwIGRpZCBzY3JvbGwgcmV0dXJuIGVhcmx5XG4gICAgaWYgKGRpZFNjcm9sbCkge1xuICAgICAgZGlkU2Nyb2xsID0gZmFsc2U7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGFjdGl2ZSA9IGRvYy5hY3RpdmVFbGVtZW50O1xuICAgIGlmICghYWN0aXZlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIG9ubHkgYmx1ciBpZiB0aGUgYWN0aXZlIGVsZW1lbnQgaXMgYSB0ZXh0LWlucHV0IG9yIGEgdGV4dGFyZWFcbiAgICBpZiAoYWN0aXZlLm1hdGNoZXMoU0tJUF9TRUxFQ1RPUikpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gaWYgdGhlIHNlbGVjdGVkIHRhcmdldCBpcyB0aGUgYWN0aXZlIGVsZW1lbnQsIGRvIG5vdCBibHVyXG4gICAgY29uc3QgdGFwcGVkID0gZXYudGFyZ2V0O1xuICAgIGlmICh0YXBwZWQgPT09IGFjdGl2ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGFwcGVkLm1hdGNoZXMoU0tJUF9TRUxFQ1RPUikgfHwgdGFwcGVkLmNsb3Nlc3QoU0tJUF9TRUxFQ1RPUikpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZm9jdXNlZCA9IGZhbHNlO1xuICAgIC8vIFRPRE8gRlctMjc5NjogZmluZCBhIGJldHRlciB3YXksIHdoeSA1MG1zP1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgaWYgKCFmb2N1c2VkKSB7XG4gICAgICAgIGFjdGl2ZS5ibHVyKCk7XG4gICAgICB9XG4gICAgfSwgNTApO1xuICB9O1xuICBhZGRFdmVudExpc3RlbmVyKGRvYywgJ2lvblNjcm9sbFN0YXJ0Jywgb25TY3JvbGwpO1xuICBkb2MuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXNpbicsIG9uRm9jdXNpbiwgdHJ1ZSk7XG4gIGRvYy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIG9uVG91Y2hlbmQsIGZhbHNlKTtcbiAgcmV0dXJuICgpID0+IHtcbiAgICByZW1vdmVFdmVudExpc3RlbmVyKGRvYywgJ2lvblNjcm9sbFN0YXJ0Jywgb25TY3JvbGwsIHRydWUpO1xuICAgIGRvYy5yZW1vdmVFdmVudExpc3RlbmVyKCdmb2N1c2luJywgb25Gb2N1c2luLCB0cnVlKTtcbiAgICBkb2MucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBvblRvdWNoZW5kLCBmYWxzZSk7XG4gIH07XG59O1xuXG5jb25zdCBTQ1JPTExfQVNTSVNUX1NQRUVEID0gMC4zO1xuY29uc3QgZ2V0U2Nyb2xsRGF0YSA9IChjb21wb25lbnRFbCwgY29udGVudEVsLCBrZXlib2FyZEhlaWdodCkgPT4ge1xuICB2YXIgX2E7XG4gIGNvbnN0IGl0ZW1FbCA9IChfYSA9IGNvbXBvbmVudEVsLmNsb3Nlc3QoJ2lvbi1pdGVtLFtpb24taXRlbV0nKSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogY29tcG9uZW50RWw7XG4gIHJldHVybiBjYWxjU2Nyb2xsRGF0YShpdGVtRWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksIGNvbnRlbnRFbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSwga2V5Ym9hcmRIZWlnaHQsIGNvbXBvbmVudEVsLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcuaW5uZXJIZWlnaHQpO1xufTtcbmNvbnN0IGNhbGNTY3JvbGxEYXRhID0gKGlucHV0UmVjdCwgY29udGVudFJlY3QsIGtleWJvYXJkSGVpZ2h0LCBwbGF0Zm9ybUhlaWdodCkgPT4ge1xuICAvLyBjb21wdXRlIGlucHV0J3MgWSB2YWx1ZXMgcmVsYXRpdmUgdG8gdGhlIGJvZHlcbiAgY29uc3QgaW5wdXRUb3AgPSBpbnB1dFJlY3QudG9wO1xuICBjb25zdCBpbnB1dEJvdHRvbSA9IGlucHV0UmVjdC5ib3R0b207XG4gIC8vIGNvbXB1dGUgdmlzaWJsZSBhcmVhXG4gIGNvbnN0IHZpc2libGVBcmVhVG9wID0gY29udGVudFJlY3QudG9wO1xuICBjb25zdCB2aXNpYmxlQXJlYUJvdHRvbSA9IE1hdGgubWluKGNvbnRlbnRSZWN0LmJvdHRvbSwgcGxhdGZvcm1IZWlnaHQgLSBrZXlib2FyZEhlaWdodCk7XG4gIC8vIGNvbXB1dGUgc2FmZSBhcmVhXG4gIGNvbnN0IHNhZmVBcmVhVG9wID0gdmlzaWJsZUFyZWFUb3AgKyAxNTtcbiAgY29uc3Qgc2FmZUFyZWFCb3R0b20gPSB2aXNpYmxlQXJlYUJvdHRvbSAqIDAuNzU7XG4gIC8vIGZpZ3VyZSBvdXQgaWYgZWFjaCBlZGdlIG9mIHRoZSBpbnB1dCBpcyB3aXRoaW4gdGhlIHNhZmUgYXJlYVxuICBjb25zdCBkaXN0YW5jZVRvQm90dG9tID0gc2FmZUFyZWFCb3R0b20gLSBpbnB1dEJvdHRvbTtcbiAgY29uc3QgZGlzdGFuY2VUb1RvcCA9IHNhZmVBcmVhVG9wIC0gaW5wdXRUb3A7XG4gIC8vIGRlc2lyZWRTY3JvbGxBbW91bnQgaXMgdGhlIG5lZ2F0ZWQgZGlzdGFuY2UgdG8gdGhlIHNhZmUgYXJlYSBhY2NvcmRpbmcgdG8gb3VyIGNhbGN1bGF0aW9ucy5cbiAgY29uc3QgZGVzaXJlZFNjcm9sbEFtb3VudCA9IE1hdGgucm91bmQoZGlzdGFuY2VUb0JvdHRvbSA8IDAgPyAtZGlzdGFuY2VUb0JvdHRvbSA6IGRpc3RhbmNlVG9Ub3AgPiAwID8gLWRpc3RhbmNlVG9Ub3AgOiAwKTtcbiAgLy8gb3VyIGNhbGN1bGF0aW9ucyBtYWtlIHNvbWUgYXNzdW1wdGlvbnMgdGhhdCBhcmVuJ3QgYWx3YXlzIHRydWUsIGxpa2UgdGhlIGtleWJvYXJkIGJlaW5nIGNsb3NlZCB3aGVuIGFuIGlucHV0XG4gIC8vIGdldHMgZm9jdXMsIHNvIG1ha2Ugc3VyZSB3ZSBkb24ndCBzY3JvbGwgdGhlIGlucHV0IGFib3ZlIHRoZSB2aXNpYmxlIGFyZWFcbiAgY29uc3Qgc2Nyb2xsQW1vdW50ID0gTWF0aC5taW4oZGVzaXJlZFNjcm9sbEFtb3VudCwgaW5wdXRUb3AgLSB2aXNpYmxlQXJlYVRvcCk7XG4gIGNvbnN0IGRpc3RhbmNlID0gTWF0aC5hYnMoc2Nyb2xsQW1vdW50KTtcbiAgY29uc3QgZHVyYXRpb24gPSBkaXN0YW5jZSAvIFNDUk9MTF9BU1NJU1RfU1BFRUQ7XG4gIGNvbnN0IHNjcm9sbER1cmF0aW9uID0gTWF0aC5taW4oNDAwLCBNYXRoLm1heCgxNTAsIGR1cmF0aW9uKSk7XG4gIHJldHVybiB7XG4gICAgc2Nyb2xsQW1vdW50LFxuICAgIHNjcm9sbER1cmF0aW9uLFxuICAgIHNjcm9sbFBhZGRpbmc6IGtleWJvYXJkSGVpZ2h0LFxuICAgIGlucHV0U2FmZVk6IC0oaW5wdXRUb3AgLSBzYWZlQXJlYVRvcCkgKyA0LFxuICB9O1xufTtcblxuY29uc3QgZW5hYmxlU2Nyb2xsQXNzaXN0ID0gKGNvbXBvbmVudEVsLCBpbnB1dEVsLCBjb250ZW50RWwsIGZvb3RlckVsLCBrZXlib2FyZEhlaWdodCwgZGlzYWJsZUNsb25lZElucHV0ID0gZmFsc2UpID0+IHtcbiAgbGV0IGNvb3JkO1xuICBjb25zdCB0b3VjaFN0YXJ0ID0gKGV2KSA9PiB7XG4gICAgY29vcmQgPSBwb2ludGVyQ29vcmQoZXYpO1xuICB9O1xuICBjb25zdCB0b3VjaEVuZCA9IChldikgPT4ge1xuICAgIC8vIGlucHV0IGNvdmVyIHRvdWNoZW5kL21vdXNldXBcbiAgICBpZiAoIWNvb3JkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIGdldCB3aGVyZSB0aGUgdG91Y2hlbmQvbW91c2V1cCBlbmRlZFxuICAgIGNvbnN0IGVuZENvb3JkID0gcG9pbnRlckNvb3JkKGV2KTtcbiAgICAvLyBmb2N1cyB0aGlzIGlucHV0IGlmIHRoZSBwb2ludGVyIGhhc24ndCBtb3ZlZCBYWCBwaXhlbHNcbiAgICAvLyBhbmQgdGhlIGlucHV0IGRvZXNuJ3QgYWxyZWFkeSBoYXZlIGZvY3VzXG4gICAgaWYgKCFoYXNQb2ludGVyTW92ZWQoNiwgY29vcmQsIGVuZENvb3JkKSAmJiAhaXNGb2N1c2VkKGlucHV0RWwpKSB7XG4gICAgICAvLyBiZWdpbiB0aGUgaW5wdXQgZm9jdXMgcHJvY2Vzc1xuICAgICAganNTZXRGb2N1cyhjb21wb25lbnRFbCwgaW5wdXRFbCwgY29udGVudEVsLCBmb290ZXJFbCwga2V5Ym9hcmRIZWlnaHQsIGRpc2FibGVDbG9uZWRJbnB1dCk7XG4gICAgfVxuICB9O1xuICBjb21wb25lbnRFbC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgdG91Y2hTdGFydCwgeyBjYXB0dXJlOiB0cnVlLCBwYXNzaXZlOiB0cnVlIH0pO1xuICBjb21wb25lbnRFbC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRvdWNoRW5kLCB0cnVlKTtcbiAgcmV0dXJuICgpID0+IHtcbiAgICBjb21wb25lbnRFbC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgdG91Y2hTdGFydCwgdHJ1ZSk7XG4gICAgY29tcG9uZW50RWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB0b3VjaEVuZCwgdHJ1ZSk7XG4gIH07XG59O1xuY29uc3QganNTZXRGb2N1cyA9IGFzeW5jIChjb21wb25lbnRFbCwgaW5wdXRFbCwgY29udGVudEVsLCBmb290ZXJFbCwga2V5Ym9hcmRIZWlnaHQsIGRpc2FibGVDbG9uZWRJbnB1dCA9IGZhbHNlKSA9PiB7XG4gIGlmICghY29udGVudEVsICYmICFmb290ZXJFbCkge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBzY3JvbGxEYXRhID0gZ2V0U2Nyb2xsRGF0YShjb21wb25lbnRFbCwgKGNvbnRlbnRFbCB8fCBmb290ZXJFbCksIGtleWJvYXJkSGVpZ2h0KTtcbiAgaWYgKGNvbnRlbnRFbCAmJiBNYXRoLmFicyhzY3JvbGxEYXRhLnNjcm9sbEFtb3VudCkgPCA0KSB7XG4gICAgLy8gdGhlIHRleHQgaW5wdXQgaXMgaW4gYSBzYWZlIHBvc2l0aW9uIHRoYXQgZG9lc24ndFxuICAgIC8vIHJlcXVpcmUgaXQgdG8gYmUgc2Nyb2xsZWQgaW50byB2aWV3LCBqdXN0IHNldCBmb2N1cyBub3dcbiAgICBpbnB1dEVsLmZvY3VzKCk7XG4gICAgcmV0dXJuO1xuICB9XG4gIC8vIHRlbXBvcmFyaWx5IG1vdmUgdGhlIGZvY3VzIHRvIHRoZSBmb2N1cyBob2xkZXIgc28gdGhlIGJyb3dzZXJcbiAgLy8gZG9lc24ndCBmcmVhayBvdXQgd2hpbGUgaXQncyB0cnlpbmcgdG8gZ2V0IHRoZSBpbnB1dCBpbiBwbGFjZVxuICAvLyBhdCB0aGlzIHBvaW50IHRoZSBuYXRpdmUgdGV4dCBpbnB1dCBzdGlsbCBkb2VzIG5vdCBoYXZlIGZvY3VzXG4gIHJlbG9jYXRlSW5wdXQoY29tcG9uZW50RWwsIGlucHV0RWwsIHRydWUsIHNjcm9sbERhdGEuaW5wdXRTYWZlWSwgZGlzYWJsZUNsb25lZElucHV0KTtcbiAgaW5wdXRFbC5mb2N1cygpO1xuICAvKipcbiAgICogUmVsb2NhdGluZy9Gb2N1c2luZyBpbnB1dCBjYXVzZXMgdGhlXG4gICAqIGNsaWNrIGV2ZW50IHRvIGJlIGNhbmNlbGxlZCwgc29cbiAgICogbWFudWFsbHkgZmlyZSBvbmUgaGVyZS5cbiAgICovXG4gIHJhZigoKSA9PiBjb21wb25lbnRFbC5jbGljaygpKTtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgbGV0IHNjcm9sbENvbnRlbnRUaW1lb3V0O1xuICAgIGNvbnN0IHNjcm9sbENvbnRlbnQgPSBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBjbGVhbiB1cCBsaXN0ZW5lcnMgYW5kIHRpbWVvdXRzXG4gICAgICBpZiAoc2Nyb2xsQ29udGVudFRpbWVvdXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjbGVhclRpbWVvdXQoc2Nyb2xsQ29udGVudFRpbWVvdXQpO1xuICAgICAgfVxuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2lvbktleWJvYXJkRGlkU2hvdycsIGRvdWJsZUtleWJvYXJkRXZlbnRMaXN0ZW5lcik7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignaW9uS2V5Ym9hcmREaWRTaG93Jywgc2Nyb2xsQ29udGVudCk7XG4gICAgICAvLyBzY3JvbGwgdGhlIGlucHV0IGludG8gcGxhY2VcbiAgICAgIGlmIChjb250ZW50RWwpIHtcbiAgICAgICAgYXdhaXQgc2Nyb2xsQnlQb2ludChjb250ZW50RWwsIDAsIHNjcm9sbERhdGEuc2Nyb2xsQW1vdW50LCBzY3JvbGxEYXRhLnNjcm9sbER1cmF0aW9uKTtcbiAgICAgIH1cbiAgICAgIC8vIHRoZSBzY3JvbGwgdmlldyBpcyBpbiB0aGUgY29ycmVjdCBwb3NpdGlvbiBub3dcbiAgICAgIC8vIGdpdmUgdGhlIG5hdGl2ZSB0ZXh0IGlucHV0IGZvY3VzXG4gICAgICByZWxvY2F0ZUlucHV0KGNvbXBvbmVudEVsLCBpbnB1dEVsLCBmYWxzZSwgc2Nyb2xsRGF0YS5pbnB1dFNhZmVZKTtcbiAgICAgIC8vIGVuc3VyZSB0aGlzIGlzIHRoZSBmb2N1c2VkIGlucHV0XG4gICAgICBpbnB1dEVsLmZvY3VzKCk7XG4gICAgfTtcbiAgICBjb25zdCBkb3VibGVLZXlib2FyZEV2ZW50TGlzdGVuZXIgPSAoKSA9PiB7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignaW9uS2V5Ym9hcmREaWRTaG93JywgZG91YmxlS2V5Ym9hcmRFdmVudExpc3RlbmVyKTtcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdpb25LZXlib2FyZERpZFNob3cnLCBzY3JvbGxDb250ZW50KTtcbiAgICB9O1xuICAgIGlmIChjb250ZW50RWwpIHtcbiAgICAgIGNvbnN0IHNjcm9sbEVsID0gYXdhaXQgZ2V0U2Nyb2xsRWxlbWVudChjb250ZW50RWwpO1xuICAgICAgLyoqXG4gICAgICAgKiBzY3JvbGxEYXRhIHdpbGwgb25seSBjb25zaWRlciB0aGUgYW1vdW50IHdlIG5lZWRcbiAgICAgICAqIHRvIHNjcm9sbCBpbiBvcmRlciB0byBwcm9wZXJseSBicmluZyB0aGUgaW5wdXRcbiAgICAgICAqIGludG8gdmlldy4gSXQgd2lsbCBub3QgY29uc2lkZXIgdGhlIGFtb3VudFxuICAgICAgICogd2UgY2FuIHNjcm9sbCBpbiB0aGUgY29udGVudCBlbGVtZW50LlxuICAgICAgICogQXMgYSByZXN1bHQsIHNjcm9sbERhdGEgbWF5IHJlcXVlc3QgYSBncmVhdGVyXG4gICAgICAgKiBzY3JvbGwgcG9zaXRpb24gdGhhbiBpcyBjdXJyZW50bHkgYXZhaWxhYmxlXG4gICAgICAgKiBpbiB0aGUgRE9NLiBJZiB0aGlzIGlzIHRoZSBjYXNlLCB3ZSBuZWVkIHRvXG4gICAgICAgKiB3YWl0IGZvciB0aGUgd2VidmlldyB0byByZXNpemUvdGhlIGtleWJvYXJkXG4gICAgICAgKiB0byBzaG93IGluIG9yZGVyIGZvciBhZGRpdGlvbmFsIHNjcm9sbFxuICAgICAgICogYmFuZHdpZHRoIHRvIGJlY29tZSBhdmFpbGFibGUuXG4gICAgICAgKi9cbiAgICAgIGNvbnN0IHRvdGFsU2Nyb2xsQW1vdW50ID0gc2Nyb2xsRWwuc2Nyb2xsSGVpZ2h0IC0gc2Nyb2xsRWwuY2xpZW50SGVpZ2h0O1xuICAgICAgaWYgKHNjcm9sbERhdGEuc2Nyb2xsQW1vdW50ID4gdG90YWxTY3JvbGxBbW91bnQgLSBzY3JvbGxFbC5zY3JvbGxUb3ApIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIE9uIGlPUyBkZXZpY2VzLCB0aGUgc3lzdGVtIHdpbGwgc2hvdyBhIFwiUGFzc3dvcmRzXCIgYmFyIGFib3ZlIHRoZSBrZXlib2FyZFxuICAgICAgICAgKiBhZnRlciB0aGUgaW5pdGlhbCBrZXlib2FyZCBpcyBzaG93bi4gVGhpcyBwcmV2ZW50cyB0aGUgd2VidmlldyBmcm9tIHJlc2l6aW5nXG4gICAgICAgICAqIHVudGlsIHRoZSBcIlBhc3N3b3Jkc1wiIGJhciBpcyBzaG93biwgc28gd2UgbmVlZCB0byB3YWl0IGZvciB0aGF0IHRvIGhhcHBlbiBmaXJzdC5cbiAgICAgICAgICovXG4gICAgICAgIGlmIChpbnB1dEVsLnR5cGUgPT09ICdwYXNzd29yZCcpIHtcbiAgICAgICAgICAvLyBBZGQgNTBweCB0byBhY2NvdW50IGZvciB0aGUgXCJQYXNzd29yZHNcIiBiYXJcbiAgICAgICAgICBzY3JvbGxEYXRhLnNjcm9sbEFtb3VudCArPSA1MDtcbiAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignaW9uS2V5Ym9hcmREaWRTaG93JywgZG91YmxlS2V5Ym9hcmRFdmVudExpc3RlbmVyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignaW9uS2V5Ym9hcmREaWRTaG93Jywgc2Nyb2xsQ29udGVudCk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoaXMgc2hvdWxkIG9ubHkgZmlyZSBpbiAyIGluc3RhbmNlczpcbiAgICAgICAgICogMS4gVGhlIGFwcCBpcyB2ZXJ5IHNsb3cuXG4gICAgICAgICAqIDIuIFRoZSBhcHAgaXMgcnVubmluZyBpbiBhIGJyb3dzZXIgb24gYW4gb2xkIE9TXG4gICAgICAgICAqIHRoYXQgZG9lcyBub3Qgc3VwcG9ydCBJb25pYyBLZXlib2FyZCBFdmVudHNcbiAgICAgICAgICovXG4gICAgICAgIHNjcm9sbENvbnRlbnRUaW1lb3V0ID0gc2V0VGltZW91dChzY3JvbGxDb250ZW50LCAxMDAwKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgICBzY3JvbGxDb250ZW50KCk7XG4gIH1cbn07XG5jb25zdCBoYXNQb2ludGVyTW92ZWQgPSAodGhyZXNob2xkLCBzdGFydENvb3JkLCBlbmRDb29yZCkgPT4ge1xuICBpZiAoc3RhcnRDb29yZCAmJiBlbmRDb29yZCkge1xuICAgIGNvbnN0IGRlbHRhWCA9IHN0YXJ0Q29vcmQueCAtIGVuZENvb3JkLng7XG4gICAgY29uc3QgZGVsdGFZID0gc3RhcnRDb29yZC55IC0gZW5kQ29vcmQueTtcbiAgICBjb25zdCBkaXN0YW5jZSA9IGRlbHRhWCAqIGRlbHRhWCArIGRlbHRhWSAqIGRlbHRhWTtcbiAgICByZXR1cm4gZGlzdGFuY2UgPiB0aHJlc2hvbGQgKiB0aHJlc2hvbGQ7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuY29uc3QgUEFERElOR19USU1FUl9LRVkgPSAnJGlvblBhZGRpbmdUaW1lcic7XG5jb25zdCBlbmFibGVTY3JvbGxQYWRkaW5nID0gKGtleWJvYXJkSGVpZ2h0KSA9PiB7XG4gIGNvbnN0IGRvYyA9IGRvY3VtZW50O1xuICBjb25zdCBvbkZvY3VzaW4gPSAoZXYpID0+IHtcbiAgICBzZXRTY3JvbGxQYWRkaW5nKGV2LnRhcmdldCwga2V5Ym9hcmRIZWlnaHQpO1xuICB9O1xuICBjb25zdCBvbkZvY3Vzb3V0ID0gKGV2KSA9PiB7XG4gICAgc2V0U2Nyb2xsUGFkZGluZyhldi50YXJnZXQsIDApO1xuICB9O1xuICBkb2MuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXNpbicsIG9uRm9jdXNpbik7XG4gIGRvYy5hZGRFdmVudExpc3RlbmVyKCdmb2N1c291dCcsIG9uRm9jdXNvdXQpO1xuICByZXR1cm4gKCkgPT4ge1xuICAgIGRvYy5yZW1vdmVFdmVudExpc3RlbmVyKCdmb2N1c2luJywgb25Gb2N1c2luKTtcbiAgICBkb2MucmVtb3ZlRXZlbnRMaXN0ZW5lcignZm9jdXNvdXQnLCBvbkZvY3Vzb3V0KTtcbiAgfTtcbn07XG5jb25zdCBzZXRTY3JvbGxQYWRkaW5nID0gKGlucHV0LCBrZXlib2FyZEhlaWdodCkgPT4ge1xuICB2YXIgX2EsIF9iO1xuICBpZiAoaW5wdXQudGFnTmFtZSAhPT0gJ0lOUFVUJykge1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAoaW5wdXQucGFyZW50RWxlbWVudCAmJiBpbnB1dC5wYXJlbnRFbGVtZW50LnRhZ05hbWUgPT09ICdJT04tSU5QVVQnKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmICgoKF9iID0gKF9hID0gaW5wdXQucGFyZW50RWxlbWVudCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnBhcmVudEVsZW1lbnQpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi50YWdOYW1lKSA9PT0gJ0lPTi1TRUFSQ0hCQVInKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IGVsID0gZmluZENsb3Nlc3RJb25Db250ZW50KGlucHV0KTtcbiAgaWYgKGVsID09PSBudWxsKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IHRpbWVyID0gZWxbUEFERElOR19USU1FUl9LRVldO1xuICBpZiAodGltZXIpIHtcbiAgICBjbGVhclRpbWVvdXQodGltZXIpO1xuICB9XG4gIGlmIChrZXlib2FyZEhlaWdodCA+IDApIHtcbiAgICBlbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1rZXlib2FyZC1vZmZzZXQnLCBgJHtrZXlib2FyZEhlaWdodH1weGApO1xuICB9XG4gIGVsc2Uge1xuICAgIGVsW1BBRERJTkdfVElNRVJfS0VZXSA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgZWwuc3R5bGUuc2V0UHJvcGVydHkoJy0ta2V5Ym9hcmQtb2Zmc2V0JywgJzBweCcpO1xuICAgIH0sIDEyMCk7XG4gIH1cbn07XG5cbmNvbnN0IElOUFVUX0JMVVJSSU5HID0gdHJ1ZTtcbmNvbnN0IFNDUk9MTF9QQURESU5HID0gdHJ1ZTtcbmNvbnN0IHN0YXJ0SW5wdXRTaGltcyA9IChjb25maWcsIHBsYXRmb3JtKSA9PiB7XG4gIGNvbnN0IGRvYyA9IGRvY3VtZW50O1xuICBjb25zdCBpc0lPUyA9IHBsYXRmb3JtID09PSAnaW9zJztcbiAgY29uc3QgaXNBbmRyb2lkID0gcGxhdGZvcm0gPT09ICdhbmRyb2lkJztcbiAgLyoqXG4gICAqIEhpZGUgQ2FyZXQgYW5kIElucHV0IEJsdXJyaW5nIGFyZSBuZWVkZWQgb24gaU9TLlxuICAgKiBTY3JvbGwgQXNzaXN0IGFuZCBTY3JvbGwgUGFkZGluZyBhcmUgbmVlZGVkIG9uIGlPUyBhbmQgQW5kcm9pZFxuICAgKiB3aXRoIENocm9tZSB3ZWIgYnJvd3NlciAobm90IENocm9tZSB3ZWJ2aWV3KS5cbiAgICovXG4gIGNvbnN0IGtleWJvYXJkSGVpZ2h0ID0gY29uZmlnLmdldE51bWJlcigna2V5Ym9hcmRIZWlnaHQnLCAyOTApO1xuICBjb25zdCBzY3JvbGxBc3Npc3QgPSBjb25maWcuZ2V0Qm9vbGVhbignc2Nyb2xsQXNzaXN0JywgdHJ1ZSk7XG4gIGNvbnN0IGhpZGVDYXJldCA9IGNvbmZpZy5nZXRCb29sZWFuKCdoaWRlQ2FyZXRPblNjcm9sbCcsIGlzSU9TKTtcbiAgY29uc3QgaW5wdXRCbHVycmluZyA9IGNvbmZpZy5nZXRCb29sZWFuKCdpbnB1dEJsdXJyaW5nJywgaXNJT1MpO1xuICBjb25zdCBzY3JvbGxQYWRkaW5nID0gY29uZmlnLmdldEJvb2xlYW4oJ3Njcm9sbFBhZGRpbmcnLCB0cnVlKTtcbiAgY29uc3QgaW5wdXRzID0gQXJyYXkuZnJvbShkb2MucXVlcnlTZWxlY3RvckFsbCgnaW9uLWlucHV0LCBpb24tdGV4dGFyZWEnKSk7XG4gIGNvbnN0IGhpZGVDYXJldE1hcCA9IG5ldyBXZWFrTWFwKCk7XG4gIGNvbnN0IHNjcm9sbEFzc2lzdE1hcCA9IG5ldyBXZWFrTWFwKCk7XG4gIGNvbnN0IHJlZ2lzdGVySW5wdXQgPSBhc3luYyAoY29tcG9uZW50RWwpID0+IHtcbiAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gY29tcG9uZW50T25SZWFkeShjb21wb25lbnRFbCwgcmVzb2x2ZSkpO1xuICAgIGNvbnN0IGlucHV0Um9vdCA9IGNvbXBvbmVudEVsLnNoYWRvd1Jvb3QgfHwgY29tcG9uZW50RWw7XG4gICAgY29uc3QgaW5wdXRFbCA9IGlucHV0Um9vdC5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpIHx8IGlucHV0Um9vdC5xdWVyeVNlbGVjdG9yKCd0ZXh0YXJlYScpO1xuICAgIGNvbnN0IHNjcm9sbEVsID0gZmluZENsb3Nlc3RJb25Db250ZW50KGNvbXBvbmVudEVsKTtcbiAgICBjb25zdCBmb290ZXJFbCA9ICFzY3JvbGxFbCA/IGNvbXBvbmVudEVsLmNsb3Nlc3QoJ2lvbi1mb290ZXInKSA6IG51bGw7XG4gICAgaWYgKCFpbnB1dEVsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICghIXNjcm9sbEVsICYmIGhpZGVDYXJldCAmJiAhaGlkZUNhcmV0TWFwLmhhcyhjb21wb25lbnRFbCkpIHtcbiAgICAgIGNvbnN0IHJtRm4gPSBlbmFibGVIaWRlQ2FyZXRPblNjcm9sbChjb21wb25lbnRFbCwgaW5wdXRFbCwgc2Nyb2xsRWwpO1xuICAgICAgaGlkZUNhcmV0TWFwLnNldChjb21wb25lbnRFbCwgcm1Gbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIGRhdGUvZGF0ZXRpbWUtbG9jYWxlIGlucHV0cyBvbiBtb2JpbGUgZGV2aWNlcyBzaG93IGRhdGUgcGlja2VyXG4gICAgICogb3ZlcmxheXMgaW5zdGVhZCBvZiBrZXlib2FyZHMuIEFzIGEgcmVzdWx0LCBzY3JvbGwgYXNzaXN0IGlzXG4gICAgICogbm90IG5lZWRlZC4gVGhpcyBhbHNvIHdvcmtzIGFyb3VuZCBhIGJ1ZyBpbiBpT1MgPDE2IHdoZXJlXG4gICAgICogc2Nyb2xsIGFzc2lzdCBjYXVzZXMgdGhlIGJyb3dzZXIgdG8gbG9jayB1cC4gU2VlIEZXLTE5OTcuXG4gICAgICovXG4gICAgY29uc3QgaXNEYXRlSW5wdXQgPSBpbnB1dEVsLnR5cGUgPT09ICdkYXRlJyB8fCBpbnB1dEVsLnR5cGUgPT09ICdkYXRldGltZS1sb2NhbCc7XG4gICAgaWYgKCFpc0RhdGVJbnB1dCAmJlxuICAgICAgKCEhc2Nyb2xsRWwgfHwgISFmb290ZXJFbCkgJiZcbiAgICAgIHNjcm9sbEFzc2lzdCAmJlxuICAgICAgIXNjcm9sbEFzc2lzdE1hcC5oYXMoY29tcG9uZW50RWwpKSB7XG4gICAgICBjb25zdCBybUZuID0gZW5hYmxlU2Nyb2xsQXNzaXN0KGNvbXBvbmVudEVsLCBpbnB1dEVsLCBzY3JvbGxFbCwgZm9vdGVyRWwsIGtleWJvYXJkSGVpZ2h0LCBpc0FuZHJvaWQpO1xuICAgICAgc2Nyb2xsQXNzaXN0TWFwLnNldChjb21wb25lbnRFbCwgcm1Gbik7XG4gICAgfVxuICB9O1xuICBjb25zdCB1bnJlZ2lzdGVySW5wdXQgPSAoY29tcG9uZW50RWwpID0+IHtcbiAgICBpZiAoaGlkZUNhcmV0KSB7XG4gICAgICBjb25zdCBmbiA9IGhpZGVDYXJldE1hcC5nZXQoY29tcG9uZW50RWwpO1xuICAgICAgaWYgKGZuKSB7XG4gICAgICAgIGZuKCk7XG4gICAgICB9XG4gICAgICBoaWRlQ2FyZXRNYXAuZGVsZXRlKGNvbXBvbmVudEVsKTtcbiAgICB9XG4gICAgaWYgKHNjcm9sbEFzc2lzdCkge1xuICAgICAgY29uc3QgZm4gPSBzY3JvbGxBc3Npc3RNYXAuZ2V0KGNvbXBvbmVudEVsKTtcbiAgICAgIGlmIChmbikge1xuICAgICAgICBmbigpO1xuICAgICAgfVxuICAgICAgc2Nyb2xsQXNzaXN0TWFwLmRlbGV0ZShjb21wb25lbnRFbCk7XG4gICAgfVxuICB9O1xuICBpZiAoaW5wdXRCbHVycmluZyAmJiBJTlBVVF9CTFVSUklORykge1xuICAgIGVuYWJsZUlucHV0Qmx1cnJpbmcoKTtcbiAgfVxuICBpZiAoc2Nyb2xsUGFkZGluZyAmJiBTQ1JPTExfUEFERElORykge1xuICAgIGVuYWJsZVNjcm9sbFBhZGRpbmcoa2V5Ym9hcmRIZWlnaHQpO1xuICB9XG4gIC8vIElucHV0IG1pZ2h0IGJlIGFscmVhZHkgbG9hZGVkIGluIHRoZSBET00gYmVmb3JlIGlvbi1kZXZpY2UtaGFja3MgZGlkLlxuICAvLyBBdCB0aGlzIHBvaW50IHdlIG5lZWQgdG8gbG9vayBmb3IgYWxsIG9mIHRoZSBpbnB1dHMgbm90IHJlZ2lzdGVyZWQgeWV0XG4gIC8vIGFuZCByZWdpc3RlciB0aGVtLlxuICBmb3IgKGNvbnN0IGlucHV0IG9mIGlucHV0cykge1xuICAgIHJlZ2lzdGVySW5wdXQoaW5wdXQpO1xuICB9XG4gIGRvYy5hZGRFdmVudExpc3RlbmVyKCdpb25JbnB1dERpZExvYWQnLCAoKGV2KSA9PiB7XG4gICAgcmVnaXN0ZXJJbnB1dChldi5kZXRhaWwpO1xuICB9KSk7XG4gIGRvYy5hZGRFdmVudExpc3RlbmVyKCdpb25JbnB1dERpZFVubG9hZCcsICgoZXYpID0+IHtcbiAgICB1bnJlZ2lzdGVySW5wdXQoZXYuZGV0YWlsKTtcbiAgfSkpO1xufTtcblxuZXhwb3J0IHsgc3RhcnRJbnB1dFNoaW1zIH07XG4iXSwibmFtZXMiOlsiZyIsImdldFNjcm9sbEVsZW1lbnQiLCJjIiwic2Nyb2xsQnlQb2ludCIsImYiLCJmaW5kQ2xvc2VzdElvbkNvbnRlbnQiLCJhIiwiYWRkRXZlbnRMaXN0ZW5lciIsImIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiciIsInJhZiIsInAiLCJwb2ludGVyQ29vcmQiLCJjb21wb25lbnRPblJlYWR5IiwiY2xvbmVNYXAiLCJXZWFrTWFwIiwicmVsb2NhdGVJbnB1dCIsImNvbXBvbmVudEVsIiwiaW5wdXRFbCIsInNob3VsZFJlbG9jYXRlIiwiaW5wdXRSZWxhdGl2ZVkiLCJkaXNhYmxlZENsb25lZElucHV0IiwiaGFzIiwiYWRkQ2xvbmUiLCJyZW1vdmVDbG9uZSIsImlzRm9jdXNlZCIsImlucHV0IiwiZ2V0Um9vdE5vZGUiLCJhY3RpdmVFbGVtZW50IiwicGFyZW50RWwiLCJwYXJlbnROb2RlIiwiY2xvbmVkRWwiLCJjbG9uZU5vZGUiLCJjbGFzc0xpc3QiLCJhZGQiLCJ0YWJJbmRleCIsImRpc2FibGVkIiwiYXBwZW5kQ2hpbGQiLCJzZXQiLCJkb2MiLCJvd25lckRvY3VtZW50IiwidHgiLCJkaXIiLCJzdHlsZSIsInBvaW50ZXJFdmVudHMiLCJ0cmFuc2Zvcm0iLCJjbG9uZSIsImdldCIsImRlbGV0ZSIsInJlbW92ZSIsImVuYWJsZUhpZGVDYXJldE9uU2Nyb2xsIiwic2Nyb2xsRWwiLCJzY3JvbGxIaWRlQ2FyZXQiLCJzaG91bGRIaWRlQ2FyZXQiLCJvbkJsdXIiLCJoaWRlQ2FyZXQiLCJzaG93Q2FyZXQiLCJTS0lQX1NFTEVDVE9SIiwiZW5hYmxlSW5wdXRCbHVycmluZyIsImZvY3VzZWQiLCJkaWRTY3JvbGwiLCJkb2N1bWVudCIsIm9uU2Nyb2xsIiwib25Gb2N1c2luIiwib25Ub3VjaGVuZCIsImV2IiwiYWN0aXZlIiwibWF0Y2hlcyIsInRhcHBlZCIsInRhcmdldCIsImNsb3Nlc3QiLCJzZXRUaW1lb3V0IiwiYmx1ciIsIlNDUk9MTF9BU1NJU1RfU1BFRUQiLCJnZXRTY3JvbGxEYXRhIiwiY29udGVudEVsIiwia2V5Ym9hcmRIZWlnaHQiLCJfYSIsIml0ZW1FbCIsImNhbGNTY3JvbGxEYXRhIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiZGVmYXVsdFZpZXciLCJpbm5lckhlaWdodCIsImlucHV0UmVjdCIsImNvbnRlbnRSZWN0IiwicGxhdGZvcm1IZWlnaHQiLCJpbnB1dFRvcCIsInRvcCIsImlucHV0Qm90dG9tIiwiYm90dG9tIiwidmlzaWJsZUFyZWFUb3AiLCJ2aXNpYmxlQXJlYUJvdHRvbSIsIk1hdGgiLCJtaW4iLCJzYWZlQXJlYVRvcCIsInNhZmVBcmVhQm90dG9tIiwiZGlzdGFuY2VUb0JvdHRvbSIsImRpc3RhbmNlVG9Ub3AiLCJkZXNpcmVkU2Nyb2xsQW1vdW50Iiwicm91bmQiLCJzY3JvbGxBbW91bnQiLCJkaXN0YW5jZSIsImFicyIsImR1cmF0aW9uIiwic2Nyb2xsRHVyYXRpb24iLCJtYXgiLCJzY3JvbGxQYWRkaW5nIiwiaW5wdXRTYWZlWSIsImVuYWJsZVNjcm9sbEFzc2lzdCIsImZvb3RlckVsIiwiZGlzYWJsZUNsb25lZElucHV0IiwiY29vcmQiLCJ0b3VjaFN0YXJ0IiwidG91Y2hFbmQiLCJlbmRDb29yZCIsImhhc1BvaW50ZXJNb3ZlZCIsImpzU2V0Rm9jdXMiLCJjYXB0dXJlIiwicGFzc2l2ZSIsInNjcm9sbERhdGEiLCJmb2N1cyIsImNsaWNrIiwid2luZG93Iiwic2Nyb2xsQ29udGVudFRpbWVvdXQiLCJzY3JvbGxDb250ZW50IiwidW5kZWZpbmVkIiwiY2xlYXJUaW1lb3V0IiwiZG91YmxlS2V5Ym9hcmRFdmVudExpc3RlbmVyIiwidG90YWxTY3JvbGxBbW91bnQiLCJzY3JvbGxIZWlnaHQiLCJjbGllbnRIZWlnaHQiLCJzY3JvbGxUb3AiLCJ0eXBlIiwidGhyZXNob2xkIiwic3RhcnRDb29yZCIsImRlbHRhWCIsIngiLCJkZWx0YVkiLCJ5IiwiUEFERElOR19USU1FUl9LRVkiLCJlbmFibGVTY3JvbGxQYWRkaW5nIiwic2V0U2Nyb2xsUGFkZGluZyIsIm9uRm9jdXNvdXQiLCJfYiIsInRhZ05hbWUiLCJwYXJlbnRFbGVtZW50IiwiZWwiLCJ0aW1lciIsInNldFByb3BlcnR5IiwiSU5QVVRfQkxVUlJJTkciLCJTQ1JPTExfUEFERElORyIsInN0YXJ0SW5wdXRTaGltcyIsImNvbmZpZyIsInBsYXRmb3JtIiwiaXNJT1MiLCJpc0FuZHJvaWQiLCJnZXROdW1iZXIiLCJzY3JvbGxBc3Npc3QiLCJnZXRCb29sZWFuIiwiaW5wdXRCbHVycmluZyIsImlucHV0cyIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJoaWRlQ2FyZXRNYXAiLCJzY3JvbGxBc3Npc3RNYXAiLCJyZWdpc3RlcklucHV0IiwiUHJvbWlzZSIsInJlc29sdmUiLCJpbnB1dFJvb3QiLCJzaGFkb3dSb290IiwicXVlcnlTZWxlY3RvciIsInJtRm4iLCJpc0RhdGVJbnB1dCIsInVucmVnaXN0ZXJJbnB1dCIsImZuIiwiZGV0YWlsIl0sInNvdXJjZVJvb3QiOiJ3ZWJwYWNrOi8vLyIsInhfZ29vZ2xlX2lnbm9yZUxpc3QiOlswXX0=