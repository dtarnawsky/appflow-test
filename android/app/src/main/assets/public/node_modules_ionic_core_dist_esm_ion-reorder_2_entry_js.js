"use strict";
(self["webpackChunkapp"] = self["webpackChunkapp"] || []).push([["node_modules_ionic_core_dist_esm_ion-reorder_2_entry_js"],{

/***/ 9273:
/*!*************************************************************!*\
  !*** ./node_modules/@ionic/core/dist/esm/index-c4b11676.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "a": () => (/* binding */ printRequiredElementError),
/* harmony export */   "b": () => (/* binding */ printIonError),
/* harmony export */   "p": () => (/* binding */ printIonWarning)
/* harmony export */ });
/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */

/**
 * Logs a warning to the console with an Ionic prefix
 * to indicate the library that is warning the developer.
 *
 * @param message - The string message to be logged to the console.
 */
const printIonWarning = (message, ...params) => {
  return console.warn(`[Ionic Warning]: ${message}`, ...params);
};
/*
 * Logs an error to the console with an Ionic prefix
 * to indicate the library that is warning the developer.
 *
 * @param message - The string message to be logged to the console.
 * @param params - Additional arguments to supply to the console.error.
 */


const printIonError = (message, ...params) => {
  return console.error(`[Ionic Error]: ${message}`, ...params);
};
/**
 * Prints an error informing developers that an implementation requires an element to be used
 * within a specific selector.
 *
 * @param el The web component element this is requiring the element.
 * @param targetSelectors The selector or selectors that were not found.
 */


const printRequiredElementError = (el, ...targetSelectors) => {
  return console.error(`<${el.tagName.toLowerCase()}> must be used inside ${targetSelectors.join(' or ')}.`);
};



/***/ }),

/***/ 2666:
/*!******************************************************************!*\
  !*** ./node_modules/@ionic/core/dist/esm/ion-reorder_2.entry.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ion_reorder": () => (/* binding */ Reorder),
/* harmony export */   "ion_reorder_group": () => (/* binding */ ReorderGroup)
/* harmony export */ });
/* harmony import */ var _Users_damian_Sample_Code_iv_test_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 1670);
/* harmony import */ var _index_8e692445_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index-8e692445.js */ 1559);
/* harmony import */ var _index_da396832_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./index-da396832.js */ 8953);
/* harmony import */ var _ionic_global_c95cf239_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ionic-global-c95cf239.js */ 8607);
/* harmony import */ var _index_5d0c8232_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./index-5d0c8232.js */ 3081);
/* harmony import */ var _helpers_3b390e48_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./helpers-3b390e48.js */ 9259);
/* harmony import */ var _haptic_029a46f6_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./haptic-029a46f6.js */ 2815);
/* harmony import */ var _index_c4b11676_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./index-c4b11676.js */ 9273);


/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */







const reorderIosCss = ":host([slot]){display:none;line-height:0;z-index:100}.reorder-icon{display:block;font-size:22px}.reorder-icon{font-size:34px;opacity:0.4}";
const reorderMdCss = ":host([slot]){display:none;line-height:0;z-index:100}.reorder-icon{display:block;font-size:22px}.reorder-icon{font-size:31px;opacity:0.3}";
const Reorder = class {
  constructor(hostRef) {
    (0,_index_8e692445_js__WEBPACK_IMPORTED_MODULE_1__.r)(this, hostRef);
  }

  onClick(ev) {
    const reorderGroup = this.el.closest('ion-reorder-group');
    ev.preventDefault(); // Only stop event propagation if the reorder is inside of an enabled
    // reorder group. This allows interaction with clickable children components.

    if (!reorderGroup || !reorderGroup.disabled) {
      ev.stopImmediatePropagation();
    }
  }

  render() {
    const mode = (0,_ionic_global_c95cf239_js__WEBPACK_IMPORTED_MODULE_3__.b)(this);
    const reorderIcon = mode === 'ios' ? _index_da396832_js__WEBPACK_IMPORTED_MODULE_2__.j : _index_da396832_js__WEBPACK_IMPORTED_MODULE_2__.k;
    return (0,_index_8e692445_js__WEBPACK_IMPORTED_MODULE_1__.h)(_index_8e692445_js__WEBPACK_IMPORTED_MODULE_1__.H, {
      class: mode
    }, (0,_index_8e692445_js__WEBPACK_IMPORTED_MODULE_1__.h)("slot", null, (0,_index_8e692445_js__WEBPACK_IMPORTED_MODULE_1__.h)("ion-icon", {
      icon: reorderIcon,
      lazy: false,
      class: "reorder-icon",
      part: "icon"
    })));
  }

  get el() {
    return (0,_index_8e692445_js__WEBPACK_IMPORTED_MODULE_1__.i)(this);
  }

};
Reorder.style = {
  ios: reorderIosCss,
  md: reorderMdCss
};
const reorderGroupCss = ".reorder-list-active>*{display:block;-webkit-transition:-webkit-transform 300ms;transition:-webkit-transform 300ms;transition:transform 300ms;transition:transform 300ms, -webkit-transform 300ms;will-change:transform}.reorder-enabled{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.reorder-enabled ion-reorder{display:block;cursor:-webkit-grab;cursor:grab;pointer-events:all;-ms-touch-action:none;touch-action:none}.reorder-selected,.reorder-selected ion-reorder{cursor:-webkit-grabbing;cursor:grabbing}.reorder-selected{position:relative;-webkit-transition:none !important;transition:none !important;-webkit-box-shadow:0 0 10px rgba(0, 0, 0, 0.4);box-shadow:0 0 10px rgba(0, 0, 0, 0.4);opacity:0.8;z-index:100}.reorder-visible ion-reorder .reorder-icon{-webkit-transform:translate3d(0,  0,  0);transform:translate3d(0,  0,  0)}";
const ReorderGroup = class {
  constructor(hostRef) {
    (0,_index_8e692445_js__WEBPACK_IMPORTED_MODULE_1__.r)(this, hostRef);
    this.ionItemReorder = (0,_index_8e692445_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, "ionItemReorder", 7);
    this.lastToIndex = -1;
    this.cachedHeights = [];
    this.scrollElTop = 0;
    this.scrollElBottom = 0;
    this.scrollElInitial = 0;
    this.containerTop = 0;
    this.containerBottom = 0;
    this.state = 0
    /* ReorderGroupState.Idle */
    ;
    /**
     * If `true`, the reorder will be hidden.
     */

    this.disabled = true;
  }

  disabledChanged() {
    if (this.gesture) {
      this.gesture.enable(!this.disabled);
    }
  }

  connectedCallback() {
    var _this = this;

    return (0,_Users_damian_Sample_Code_iv_test_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const contentEl = (0,_index_5d0c8232_js__WEBPACK_IMPORTED_MODULE_4__.f)(_this.el);

      if (contentEl) {
        _this.scrollEl = yield (0,_index_5d0c8232_js__WEBPACK_IMPORTED_MODULE_4__.g)(contentEl);
      }

      _this.gesture = (yield Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ./index-f8d8aa5a.js */ 9286))).createGesture({
        el: _this.el,
        gestureName: 'reorder',
        gesturePriority: 110,
        threshold: 0,
        direction: 'y',
        passive: false,
        canStart: detail => _this.canStart(detail),
        onStart: ev => _this.onStart(ev),
        onMove: ev => _this.onMove(ev),
        onEnd: () => _this.onEnd()
      });

      _this.disabledChanged();
    })();
  }

  disconnectedCallback() {
    this.onEnd();

    if (this.gesture) {
      this.gesture.destroy();
      this.gesture = undefined;
    }
  }
  /**
   * Completes the reorder operation. Must be called by the `ionItemReorder` event.
   *
   * If a list of items is passed, the list will be reordered and returned in the
   * proper order.
   *
   * If no parameters are passed or if `true` is passed in, the reorder will complete
   * and the item will remain in the position it was dragged to. If `false` is passed,
   * the reorder will complete and the item will bounce back to its original position.
   *
   * @param listOrReorder A list of items to be sorted and returned in the new order or a
   * boolean of whether or not the reorder should reposition the item.
   */


  complete(listOrReorder) {
    return Promise.resolve(this.completeReorder(listOrReorder));
  }

  canStart(ev) {
    if (this.selectedItemEl || this.state !== 0
    /* ReorderGroupState.Idle */
    ) {
      return false;
    }

    const target = ev.event.target;
    const reorderEl = target.closest('ion-reorder');

    if (!reorderEl) {
      return false;
    }

    const item = findReorderItem(reorderEl, this.el);

    if (!item) {
      return false;
    }

    ev.data = item;
    return true;
  }

  onStart(ev) {
    ev.event.preventDefault();
    const item = this.selectedItemEl = ev.data;
    const heights = this.cachedHeights;
    heights.length = 0;
    const el = this.el;
    const children = el.children;

    if (!children || children.length === 0) {
      return;
    }

    let sum = 0;

    for (let i = 0; i < children.length; i++) {
      const child = children[i];
      sum += child.offsetHeight;
      heights.push(sum);
      child.$ionIndex = i;
    }

    const box = el.getBoundingClientRect();
    this.containerTop = box.top;
    this.containerBottom = box.bottom;

    if (this.scrollEl) {
      const scrollBox = this.scrollEl.getBoundingClientRect();
      this.scrollElInitial = this.scrollEl.scrollTop;
      this.scrollElTop = scrollBox.top + AUTO_SCROLL_MARGIN;
      this.scrollElBottom = scrollBox.bottom - AUTO_SCROLL_MARGIN;
    } else {
      this.scrollElInitial = 0;
      this.scrollElTop = 0;
      this.scrollElBottom = 0;
    }

    this.lastToIndex = indexForItem(item);
    this.selectedItemHeight = item.offsetHeight;
    this.state = 1
    /* ReorderGroupState.Active */
    ;
    item.classList.add(ITEM_REORDER_SELECTED);
    (0,_haptic_029a46f6_js__WEBPACK_IMPORTED_MODULE_6__.a)();
  }

  onMove(ev) {
    const selectedItem = this.selectedItemEl;

    if (!selectedItem) {
      return;
    } // Scroll if we reach the scroll margins


    const scroll = this.autoscroll(ev.currentY); // // Get coordinate

    const top = this.containerTop - scroll;
    const bottom = this.containerBottom - scroll;
    const currentY = Math.max(top, Math.min(ev.currentY, bottom));
    const deltaY = scroll + currentY - ev.startY;
    const normalizedY = currentY - top;
    const toIndex = this.itemIndexForTop(normalizedY);

    if (toIndex !== this.lastToIndex) {
      const fromIndex = indexForItem(selectedItem);
      this.lastToIndex = toIndex;
      (0,_haptic_029a46f6_js__WEBPACK_IMPORTED_MODULE_6__.b)();
      this.reorderMove(fromIndex, toIndex);
    } // Update selected item position


    selectedItem.style.transform = `translateY(${deltaY}px)`;
  }

  onEnd() {
    const selectedItemEl = this.selectedItemEl;
    this.state = 2
    /* ReorderGroupState.Complete */
    ;

    if (!selectedItemEl) {
      this.state = 0
      /* ReorderGroupState.Idle */
      ;
      return;
    }

    const toIndex = this.lastToIndex;
    const fromIndex = indexForItem(selectedItemEl);

    if (toIndex === fromIndex) {
      this.completeReorder();
    } else {
      this.ionItemReorder.emit({
        from: fromIndex,
        to: toIndex,
        complete: this.completeReorder.bind(this)
      });
    }

    (0,_haptic_029a46f6_js__WEBPACK_IMPORTED_MODULE_6__.h)();
  }

  completeReorder(listOrReorder) {
    const selectedItemEl = this.selectedItemEl;

    if (selectedItemEl && this.state === 2
    /* ReorderGroupState.Complete */
    ) {
      const children = this.el.children;
      const len = children.length;
      const toIndex = this.lastToIndex;
      const fromIndex = indexForItem(selectedItemEl);
      /**
       * insertBefore and setting the transform
       * needs to happen in the same frame otherwise
       * there will be a duplicate transition. This primarily
       * impacts Firefox where insertBefore and transform operations
       * are happening in two separate frames.
       */

      (0,_helpers_3b390e48_js__WEBPACK_IMPORTED_MODULE_5__.r)(() => {
        if (toIndex !== fromIndex && (listOrReorder === undefined || listOrReorder === true)) {
          const ref = fromIndex < toIndex ? children[toIndex + 1] : children[toIndex];
          this.el.insertBefore(selectedItemEl, ref);
        }

        for (let i = 0; i < len; i++) {
          children[i].style['transform'] = '';
        }
      });

      if (Array.isArray(listOrReorder)) {
        listOrReorder = reorderArray(listOrReorder, fromIndex, toIndex);
      }

      selectedItemEl.style.transition = '';
      selectedItemEl.classList.remove(ITEM_REORDER_SELECTED);
      this.selectedItemEl = undefined;
      this.state = 0
      /* ReorderGroupState.Idle */
      ;
    }

    return listOrReorder;
  }

  itemIndexForTop(deltaY) {
    const heights = this.cachedHeights;

    for (let i = 0; i < heights.length; i++) {
      if (heights[i] > deltaY) {
        return i;
      }
    }

    return heights.length - 1;
  }
  /********* DOM WRITE ********* */


  reorderMove(fromIndex, toIndex) {
    const itemHeight = this.selectedItemHeight;
    const children = this.el.children;

    for (let i = 0; i < children.length; i++) {
      const style = children[i].style;
      let value = '';

      if (i > fromIndex && i <= toIndex) {
        value = `translateY(${-itemHeight}px)`;
      } else if (i < fromIndex && i >= toIndex) {
        value = `translateY(${itemHeight}px)`;
      }

      style['transform'] = value;
    }
  }

  autoscroll(posY) {
    if (!this.scrollEl) {
      return 0;
    }

    let amount = 0;

    if (posY < this.scrollElTop) {
      amount = -SCROLL_JUMP;
    } else if (posY > this.scrollElBottom) {
      amount = SCROLL_JUMP;
    }

    if (amount !== 0) {
      this.scrollEl.scrollBy(0, amount);
    }

    return this.scrollEl.scrollTop - this.scrollElInitial;
  }

  render() {
    const mode = (0,_ionic_global_c95cf239_js__WEBPACK_IMPORTED_MODULE_3__.b)(this);
    return (0,_index_8e692445_js__WEBPACK_IMPORTED_MODULE_1__.h)(_index_8e692445_js__WEBPACK_IMPORTED_MODULE_1__.H, {
      class: {
        [mode]: true,
        'reorder-enabled': !this.disabled,
        'reorder-list-active': this.state !== 0
        /* ReorderGroupState.Idle */

      }
    });
  }

  get el() {
    return (0,_index_8e692445_js__WEBPACK_IMPORTED_MODULE_1__.i)(this);
  }

  static get watchers() {
    return {
      "disabled": ["disabledChanged"]
    };
  }

};

const indexForItem = element => {
  return element['$ionIndex'];
};

const findReorderItem = (node, container) => {
  let parent;

  while (node) {
    parent = node.parentElement;

    if (parent === container) {
      return node;
    }

    node = parent;
  }

  return undefined;
};

const AUTO_SCROLL_MARGIN = 60;
const SCROLL_JUMP = 10;
const ITEM_REORDER_SELECTED = 'reorder-selected';

const reorderArray = (array, from, to) => {
  const element = array[from];
  array.splice(from, 1);
  array.splice(to, 0, element);
  return array.slice();
};

ReorderGroup.style = reorderGroupCss;


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm9kZV9tb2R1bGVzX2lvbmljX2NvcmVfZGlzdF9lc21faW9uLXJlb3JkZXJfMl9lbnRyeV9qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTUEsZUFBZSxHQUFHLENBQUNDLE9BQUQsRUFBVSxHQUFHQyxNQUFiLEtBQXdCO0VBQzlDLE9BQU9DLE9BQU8sQ0FBQ0MsSUFBUixDQUFjLG9CQUFtQkgsT0FBUSxFQUF6QyxFQUE0QyxHQUFHQyxNQUEvQyxDQUFQO0FBQ0QsQ0FGRDtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQSxNQUFNRyxhQUFhLEdBQUcsQ0FBQ0osT0FBRCxFQUFVLEdBQUdDLE1BQWIsS0FBd0I7RUFDNUMsT0FBT0MsT0FBTyxDQUFDRyxLQUFSLENBQWUsa0JBQWlCTCxPQUFRLEVBQXhDLEVBQTJDLEdBQUdDLE1BQTlDLENBQVA7QUFDRCxDQUZEO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBLE1BQU1LLHlCQUF5QixHQUFHLENBQUNDLEVBQUQsRUFBSyxHQUFHQyxlQUFSLEtBQTRCO0VBQzVELE9BQU9OLE9BQU8sQ0FBQ0csS0FBUixDQUFlLElBQUdFLEVBQUUsQ0FBQ0UsT0FBSCxDQUFXQyxXQUFYLEVBQXlCLHlCQUF3QkYsZUFBZSxDQUFDRyxJQUFoQixDQUFxQixNQUFyQixDQUE2QixHQUFoRyxDQUFQO0FBQ0QsQ0FGRDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDN0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUEsTUFBTTBCLGFBQWEsR0FBRywySUFBdEI7QUFFQSxNQUFNQyxZQUFZLEdBQUcsMklBQXJCO0FBRUEsTUFBTUMsT0FBTyxHQUFHLE1BQU07RUFDcEJDLFdBQVcsQ0FBQ0MsT0FBRCxFQUFVO0lBQ25CekIscURBQWdC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QUFQO0VBRXBCOztBQXRQcUIsQ0FBM0I7O0FBd1BBLE1BQU10QyxZQUFZLEdBQUl1QyxPQUFELElBQWE7RUFDaEMsT0FBT0EsT0FBTyxDQUFDLFdBQUQsQ0FBZDtBQUNELENBRkQ7O0FBR0EsTUFBTXhELGVBQWUsR0FBRyxDQUFDeUQsSUFBRCxFQUFPQyxTQUFQLEtBQXFCO0VBQzNDLElBQUlDLE1BQUo7O0VBQ0EsT0FBT0YsSUFBUCxFQUFhO0lBQ1hFLE1BQU0sR0FBR0YsSUFBSSxDQUFDRyxhQUFkOztJQUNBLElBQUlELE1BQU0sS0FBS0QsU0FBZixFQUEwQjtNQUN4QixPQUFPRCxJQUFQO0lBQ0Q7O0lBQ0RBLElBQUksR0FBR0UsTUFBUDtFQUNEOztFQUNELE9BQU90RSxTQUFQO0FBQ0QsQ0FWRDs7QUFXQSxNQUFNMkIsa0JBQWtCLEdBQUcsRUFBM0I7QUFDQSxNQUFNcUMsV0FBVyxHQUFHLEVBQXBCO0FBQ0EsTUFBTWhDLHFCQUFxQixHQUFHLGtCQUE5Qjs7QUFDQSxNQUFNeUIsWUFBWSxHQUFHLENBQUNlLEtBQUQsRUFBUXZCLElBQVIsRUFBY0MsRUFBZCxLQUFxQjtFQUN4QyxNQUFNaUIsT0FBTyxHQUFHSyxLQUFLLENBQUN2QixJQUFELENBQXJCO0VBQ0F1QixLQUFLLENBQUNDLE1BQU4sQ0FBYXhCLElBQWIsRUFBbUIsQ0FBbkI7RUFDQXVCLEtBQUssQ0FBQ0MsTUFBTixDQUFhdkIsRUFBYixFQUFpQixDQUFqQixFQUFvQmlCLE9BQXBCO0VBQ0EsT0FBT0ssS0FBSyxDQUFDRSxLQUFOLEVBQVA7QUFDRCxDQUxEOztBQU1BdkcsWUFBWSxDQUFDSixLQUFiLEdBQXFCRyxlQUFyQiIsInNvdXJjZXMiOlsiLi9ub2RlX21vZHVsZXMvQGlvbmljL2NvcmUvZGlzdC9lc20vaW5kZXgtYzRiMTE2NzYuanMiLCIuL25vZGVfbW9kdWxlcy9AaW9uaWMvY29yZS9kaXN0L2VzbS9pb24tcmVvcmRlcl8yLmVudHJ5LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogKEMpIElvbmljIGh0dHA6Ly9pb25pY2ZyYW1ld29yay5jb20gLSBNSVQgTGljZW5zZVxuICovXG4vKipcbiAqIExvZ3MgYSB3YXJuaW5nIHRvIHRoZSBjb25zb2xlIHdpdGggYW4gSW9uaWMgcHJlZml4XG4gKiB0byBpbmRpY2F0ZSB0aGUgbGlicmFyeSB0aGF0IGlzIHdhcm5pbmcgdGhlIGRldmVsb3Blci5cbiAqXG4gKiBAcGFyYW0gbWVzc2FnZSAtIFRoZSBzdHJpbmcgbWVzc2FnZSB0byBiZSBsb2dnZWQgdG8gdGhlIGNvbnNvbGUuXG4gKi9cbmNvbnN0IHByaW50SW9uV2FybmluZyA9IChtZXNzYWdlLCAuLi5wYXJhbXMpID0+IHtcbiAgcmV0dXJuIGNvbnNvbGUud2FybihgW0lvbmljIFdhcm5pbmddOiAke21lc3NhZ2V9YCwgLi4ucGFyYW1zKTtcbn07XG4vKlxuICogTG9ncyBhbiBlcnJvciB0byB0aGUgY29uc29sZSB3aXRoIGFuIElvbmljIHByZWZpeFxuICogdG8gaW5kaWNhdGUgdGhlIGxpYnJhcnkgdGhhdCBpcyB3YXJuaW5nIHRoZSBkZXZlbG9wZXIuXG4gKlxuICogQHBhcmFtIG1lc3NhZ2UgLSBUaGUgc3RyaW5nIG1lc3NhZ2UgdG8gYmUgbG9nZ2VkIHRvIHRoZSBjb25zb2xlLlxuICogQHBhcmFtIHBhcmFtcyAtIEFkZGl0aW9uYWwgYXJndW1lbnRzIHRvIHN1cHBseSB0byB0aGUgY29uc29sZS5lcnJvci5cbiAqL1xuY29uc3QgcHJpbnRJb25FcnJvciA9IChtZXNzYWdlLCAuLi5wYXJhbXMpID0+IHtcbiAgcmV0dXJuIGNvbnNvbGUuZXJyb3IoYFtJb25pYyBFcnJvcl06ICR7bWVzc2FnZX1gLCAuLi5wYXJhbXMpO1xufTtcbi8qKlxuICogUHJpbnRzIGFuIGVycm9yIGluZm9ybWluZyBkZXZlbG9wZXJzIHRoYXQgYW4gaW1wbGVtZW50YXRpb24gcmVxdWlyZXMgYW4gZWxlbWVudCB0byBiZSB1c2VkXG4gKiB3aXRoaW4gYSBzcGVjaWZpYyBzZWxlY3Rvci5cbiAqXG4gKiBAcGFyYW0gZWwgVGhlIHdlYiBjb21wb25lbnQgZWxlbWVudCB0aGlzIGlzIHJlcXVpcmluZyB0aGUgZWxlbWVudC5cbiAqIEBwYXJhbSB0YXJnZXRTZWxlY3RvcnMgVGhlIHNlbGVjdG9yIG9yIHNlbGVjdG9ycyB0aGF0IHdlcmUgbm90IGZvdW5kLlxuICovXG5jb25zdCBwcmludFJlcXVpcmVkRWxlbWVudEVycm9yID0gKGVsLCAuLi50YXJnZXRTZWxlY3RvcnMpID0+IHtcbiAgcmV0dXJuIGNvbnNvbGUuZXJyb3IoYDwke2VsLnRhZ05hbWUudG9Mb3dlckNhc2UoKX0+IG11c3QgYmUgdXNlZCBpbnNpZGUgJHt0YXJnZXRTZWxlY3RvcnMuam9pbignIG9yICcpfS5gKTtcbn07XG5cbmV4cG9ydCB7IHByaW50UmVxdWlyZWRFbGVtZW50RXJyb3IgYXMgYSwgcHJpbnRJb25FcnJvciBhcyBiLCBwcmludElvbldhcm5pbmcgYXMgcCB9O1xuIiwiLyohXG4gKiAoQykgSW9uaWMgaHR0cDovL2lvbmljZnJhbWV3b3JrLmNvbSAtIE1JVCBMaWNlbnNlXG4gKi9cbmltcG9ydCB7IHIgYXMgcmVnaXN0ZXJJbnN0YW5jZSwgaCwgSCBhcyBIb3N0LCBpIGFzIGdldEVsZW1lbnQsIGUgYXMgY3JlYXRlRXZlbnQgfSBmcm9tICcuL2luZGV4LThlNjkyNDQ1LmpzJztcbmltcG9ydCB7IGogYXMgcmVvcmRlclRocmVlT3V0bGluZSwgayBhcyByZW9yZGVyVHdvU2hhcnAgfSBmcm9tICcuL2luZGV4LWRhMzk2ODMyLmpzJztcbmltcG9ydCB7IGIgYXMgZ2V0SW9uTW9kZSB9IGZyb20gJy4vaW9uaWMtZ2xvYmFsLWM5NWNmMjM5LmpzJztcbmltcG9ydCB7IGYgYXMgZmluZENsb3Nlc3RJb25Db250ZW50LCBnIGFzIGdldFNjcm9sbEVsZW1lbnQgfSBmcm9tICcuL2luZGV4LTVkMGM4MjMyLmpzJztcbmltcG9ydCB7IHIgYXMgcmFmIH0gZnJvbSAnLi9oZWxwZXJzLTNiMzkwZTQ4LmpzJztcbmltcG9ydCB7IGEgYXMgaGFwdGljU2VsZWN0aW9uU3RhcnQsIGIgYXMgaGFwdGljU2VsZWN0aW9uQ2hhbmdlZCwgaCBhcyBoYXB0aWNTZWxlY3Rpb25FbmQgfSBmcm9tICcuL2hhcHRpYy0wMjlhNDZmNi5qcyc7XG5pbXBvcnQgJy4vaW5kZXgtYzRiMTE2NzYuanMnO1xuXG5jb25zdCByZW9yZGVySW9zQ3NzID0gXCI6aG9zdChbc2xvdF0pe2Rpc3BsYXk6bm9uZTtsaW5lLWhlaWdodDowO3otaW5kZXg6MTAwfS5yZW9yZGVyLWljb257ZGlzcGxheTpibG9jaztmb250LXNpemU6MjJweH0ucmVvcmRlci1pY29ue2ZvbnQtc2l6ZTozNHB4O29wYWNpdHk6MC40fVwiO1xuXG5jb25zdCByZW9yZGVyTWRDc3MgPSBcIjpob3N0KFtzbG90XSl7ZGlzcGxheTpub25lO2xpbmUtaGVpZ2h0OjA7ei1pbmRleDoxMDB9LnJlb3JkZXItaWNvbntkaXNwbGF5OmJsb2NrO2ZvbnQtc2l6ZToyMnB4fS5yZW9yZGVyLWljb257Zm9udC1zaXplOjMxcHg7b3BhY2l0eTowLjN9XCI7XG5cbmNvbnN0IFJlb3JkZXIgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKGhvc3RSZWYpIHtcbiAgICByZWdpc3Rlckluc3RhbmNlKHRoaXMsIGhvc3RSZWYpO1xuICB9XG4gIG9uQ2xpY2soZXYpIHtcbiAgICBjb25zdCByZW9yZGVyR3JvdXAgPSB0aGlzLmVsLmNsb3Nlc3QoJ2lvbi1yZW9yZGVyLWdyb3VwJyk7XG4gICAgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICAvLyBPbmx5IHN0b3AgZXZlbnQgcHJvcGFnYXRpb24gaWYgdGhlIHJlb3JkZXIgaXMgaW5zaWRlIG9mIGFuIGVuYWJsZWRcbiAgICAvLyByZW9yZGVyIGdyb3VwLiBUaGlzIGFsbG93cyBpbnRlcmFjdGlvbiB3aXRoIGNsaWNrYWJsZSBjaGlsZHJlbiBjb21wb25lbnRzLlxuICAgIGlmICghcmVvcmRlckdyb3VwIHx8ICFyZW9yZGVyR3JvdXAuZGlzYWJsZWQpIHtcbiAgICAgIGV2LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICAgIH1cbiAgfVxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgbW9kZSA9IGdldElvbk1vZGUodGhpcyk7XG4gICAgY29uc3QgcmVvcmRlckljb24gPSBtb2RlID09PSAnaW9zJyA/IHJlb3JkZXJUaHJlZU91dGxpbmUgOiByZW9yZGVyVHdvU2hhcnA7XG4gICAgcmV0dXJuIChoKEhvc3QsIHsgY2xhc3M6IG1vZGUgfSwgaChcInNsb3RcIiwgbnVsbCwgaChcImlvbi1pY29uXCIsIHsgaWNvbjogcmVvcmRlckljb24sIGxhenk6IGZhbHNlLCBjbGFzczogXCJyZW9yZGVyLWljb25cIiwgcGFydDogXCJpY29uXCIgfSkpKSk7XG4gIH1cbiAgZ2V0IGVsKCkgeyByZXR1cm4gZ2V0RWxlbWVudCh0aGlzKTsgfVxufTtcblJlb3JkZXIuc3R5bGUgPSB7XG4gIGlvczogcmVvcmRlcklvc0NzcyxcbiAgbWQ6IHJlb3JkZXJNZENzc1xufTtcblxuY29uc3QgcmVvcmRlckdyb3VwQ3NzID0gXCIucmVvcmRlci1saXN0LWFjdGl2ZT4qe2Rpc3BsYXk6YmxvY2s7LXdlYmtpdC10cmFuc2l0aW9uOi13ZWJraXQtdHJhbnNmb3JtIDMwMG1zO3RyYW5zaXRpb246LXdlYmtpdC10cmFuc2Zvcm0gMzAwbXM7dHJhbnNpdGlvbjp0cmFuc2Zvcm0gMzAwbXM7dHJhbnNpdGlvbjp0cmFuc2Zvcm0gMzAwbXMsIC13ZWJraXQtdHJhbnNmb3JtIDMwMG1zO3dpbGwtY2hhbmdlOnRyYW5zZm9ybX0ucmVvcmRlci1lbmFibGVkey13ZWJraXQtdXNlci1zZWxlY3Q6bm9uZTstbW96LXVzZXItc2VsZWN0Om5vbmU7LW1zLXVzZXItc2VsZWN0Om5vbmU7dXNlci1zZWxlY3Q6bm9uZX0ucmVvcmRlci1lbmFibGVkIGlvbi1yZW9yZGVye2Rpc3BsYXk6YmxvY2s7Y3Vyc29yOi13ZWJraXQtZ3JhYjtjdXJzb3I6Z3JhYjtwb2ludGVyLWV2ZW50czphbGw7LW1zLXRvdWNoLWFjdGlvbjpub25lO3RvdWNoLWFjdGlvbjpub25lfS5yZW9yZGVyLXNlbGVjdGVkLC5yZW9yZGVyLXNlbGVjdGVkIGlvbi1yZW9yZGVye2N1cnNvcjotd2Via2l0LWdyYWJiaW5nO2N1cnNvcjpncmFiYmluZ30ucmVvcmRlci1zZWxlY3RlZHtwb3NpdGlvbjpyZWxhdGl2ZTstd2Via2l0LXRyYW5zaXRpb246bm9uZSAhaW1wb3J0YW50O3RyYW5zaXRpb246bm9uZSAhaW1wb3J0YW50Oy13ZWJraXQtYm94LXNoYWRvdzowIDAgMTBweCByZ2JhKDAsIDAsIDAsIDAuNCk7Ym94LXNoYWRvdzowIDAgMTBweCByZ2JhKDAsIDAsIDAsIDAuNCk7b3BhY2l0eTowLjg7ei1pbmRleDoxMDB9LnJlb3JkZXItdmlzaWJsZSBpb24tcmVvcmRlciAucmVvcmRlci1pY29uey13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDAsICAwLCAgMCk7dHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDAsICAwLCAgMCl9XCI7XG5cbmNvbnN0IFJlb3JkZXJHcm91cCA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IoaG9zdFJlZikge1xuICAgIHJlZ2lzdGVySW5zdGFuY2UodGhpcywgaG9zdFJlZik7XG4gICAgdGhpcy5pb25JdGVtUmVvcmRlciA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwiaW9uSXRlbVJlb3JkZXJcIiwgNyk7XG4gICAgdGhpcy5sYXN0VG9JbmRleCA9IC0xO1xuICAgIHRoaXMuY2FjaGVkSGVpZ2h0cyA9IFtdO1xuICAgIHRoaXMuc2Nyb2xsRWxUb3AgPSAwO1xuICAgIHRoaXMuc2Nyb2xsRWxCb3R0b20gPSAwO1xuICAgIHRoaXMuc2Nyb2xsRWxJbml0aWFsID0gMDtcbiAgICB0aGlzLmNvbnRhaW5lclRvcCA9IDA7XG4gICAgdGhpcy5jb250YWluZXJCb3R0b20gPSAwO1xuICAgIHRoaXMuc3RhdGUgPSAwIC8qIFJlb3JkZXJHcm91cFN0YXRlLklkbGUgKi87XG4gICAgLyoqXG4gICAgICogSWYgYHRydWVgLCB0aGUgcmVvcmRlciB3aWxsIGJlIGhpZGRlbi5cbiAgICAgKi9cbiAgICB0aGlzLmRpc2FibGVkID0gdHJ1ZTtcbiAgfVxuICBkaXNhYmxlZENoYW5nZWQoKSB7XG4gICAgaWYgKHRoaXMuZ2VzdHVyZSkge1xuICAgICAgdGhpcy5nZXN0dXJlLmVuYWJsZSghdGhpcy5kaXNhYmxlZCk7XG4gICAgfVxuICB9XG4gIGFzeW5jIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIGNvbnN0IGNvbnRlbnRFbCA9IGZpbmRDbG9zZXN0SW9uQ29udGVudCh0aGlzLmVsKTtcbiAgICBpZiAoY29udGVudEVsKSB7XG4gICAgICB0aGlzLnNjcm9sbEVsID0gYXdhaXQgZ2V0U2Nyb2xsRWxlbWVudChjb250ZW50RWwpO1xuICAgIH1cbiAgICB0aGlzLmdlc3R1cmUgPSAoYXdhaXQgaW1wb3J0KCcuL2luZGV4LWY4ZDhhYTVhLmpzJykpLmNyZWF0ZUdlc3R1cmUoe1xuICAgICAgZWw6IHRoaXMuZWwsXG4gICAgICBnZXN0dXJlTmFtZTogJ3Jlb3JkZXInLFxuICAgICAgZ2VzdHVyZVByaW9yaXR5OiAxMTAsXG4gICAgICB0aHJlc2hvbGQ6IDAsXG4gICAgICBkaXJlY3Rpb246ICd5JyxcbiAgICAgIHBhc3NpdmU6IGZhbHNlLFxuICAgICAgY2FuU3RhcnQ6IChkZXRhaWwpID0+IHRoaXMuY2FuU3RhcnQoZGV0YWlsKSxcbiAgICAgIG9uU3RhcnQ6IChldikgPT4gdGhpcy5vblN0YXJ0KGV2KSxcbiAgICAgIG9uTW92ZTogKGV2KSA9PiB0aGlzLm9uTW92ZShldiksXG4gICAgICBvbkVuZDogKCkgPT4gdGhpcy5vbkVuZCgpLFxuICAgIH0pO1xuICAgIHRoaXMuZGlzYWJsZWRDaGFuZ2VkKCk7XG4gIH1cbiAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgdGhpcy5vbkVuZCgpO1xuICAgIGlmICh0aGlzLmdlc3R1cmUpIHtcbiAgICAgIHRoaXMuZ2VzdHVyZS5kZXN0cm95KCk7XG4gICAgICB0aGlzLmdlc3R1cmUgPSB1bmRlZmluZWQ7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBDb21wbGV0ZXMgdGhlIHJlb3JkZXIgb3BlcmF0aW9uLiBNdXN0IGJlIGNhbGxlZCBieSB0aGUgYGlvbkl0ZW1SZW9yZGVyYCBldmVudC5cbiAgICpcbiAgICogSWYgYSBsaXN0IG9mIGl0ZW1zIGlzIHBhc3NlZCwgdGhlIGxpc3Qgd2lsbCBiZSByZW9yZGVyZWQgYW5kIHJldHVybmVkIGluIHRoZVxuICAgKiBwcm9wZXIgb3JkZXIuXG4gICAqXG4gICAqIElmIG5vIHBhcmFtZXRlcnMgYXJlIHBhc3NlZCBvciBpZiBgdHJ1ZWAgaXMgcGFzc2VkIGluLCB0aGUgcmVvcmRlciB3aWxsIGNvbXBsZXRlXG4gICAqIGFuZCB0aGUgaXRlbSB3aWxsIHJlbWFpbiBpbiB0aGUgcG9zaXRpb24gaXQgd2FzIGRyYWdnZWQgdG8uIElmIGBmYWxzZWAgaXMgcGFzc2VkLFxuICAgKiB0aGUgcmVvcmRlciB3aWxsIGNvbXBsZXRlIGFuZCB0aGUgaXRlbSB3aWxsIGJvdW5jZSBiYWNrIHRvIGl0cyBvcmlnaW5hbCBwb3NpdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIGxpc3RPclJlb3JkZXIgQSBsaXN0IG9mIGl0ZW1zIHRvIGJlIHNvcnRlZCBhbmQgcmV0dXJuZWQgaW4gdGhlIG5ldyBvcmRlciBvciBhXG4gICAqIGJvb2xlYW4gb2Ygd2hldGhlciBvciBub3QgdGhlIHJlb3JkZXIgc2hvdWxkIHJlcG9zaXRpb24gdGhlIGl0ZW0uXG4gICAqL1xuICBjb21wbGV0ZShsaXN0T3JSZW9yZGVyKSB7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLmNvbXBsZXRlUmVvcmRlcihsaXN0T3JSZW9yZGVyKSk7XG4gIH1cbiAgY2FuU3RhcnQoZXYpIHtcbiAgICBpZiAodGhpcy5zZWxlY3RlZEl0ZW1FbCB8fCB0aGlzLnN0YXRlICE9PSAwIC8qIFJlb3JkZXJHcm91cFN0YXRlLklkbGUgKi8pIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgdGFyZ2V0ID0gZXYuZXZlbnQudGFyZ2V0O1xuICAgIGNvbnN0IHJlb3JkZXJFbCA9IHRhcmdldC5jbG9zZXN0KCdpb24tcmVvcmRlcicpO1xuICAgIGlmICghcmVvcmRlckVsKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IGl0ZW0gPSBmaW5kUmVvcmRlckl0ZW0ocmVvcmRlckVsLCB0aGlzLmVsKTtcbiAgICBpZiAoIWl0ZW0pIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZXYuZGF0YSA9IGl0ZW07XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgb25TdGFydChldikge1xuICAgIGV2LmV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3QgaXRlbSA9ICh0aGlzLnNlbGVjdGVkSXRlbUVsID0gZXYuZGF0YSk7XG4gICAgY29uc3QgaGVpZ2h0cyA9IHRoaXMuY2FjaGVkSGVpZ2h0cztcbiAgICBoZWlnaHRzLmxlbmd0aCA9IDA7XG4gICAgY29uc3QgZWwgPSB0aGlzLmVsO1xuICAgIGNvbnN0IGNoaWxkcmVuID0gZWwuY2hpbGRyZW47XG4gICAgaWYgKCFjaGlsZHJlbiB8fCBjaGlsZHJlbi5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbGV0IHN1bSA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgY2hpbGQgPSBjaGlsZHJlbltpXTtcbiAgICAgIHN1bSArPSBjaGlsZC5vZmZzZXRIZWlnaHQ7XG4gICAgICBoZWlnaHRzLnB1c2goc3VtKTtcbiAgICAgIGNoaWxkLiRpb25JbmRleCA9IGk7XG4gICAgfVxuICAgIGNvbnN0IGJveCA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIHRoaXMuY29udGFpbmVyVG9wID0gYm94LnRvcDtcbiAgICB0aGlzLmNvbnRhaW5lckJvdHRvbSA9IGJveC5ib3R0b207XG4gICAgaWYgKHRoaXMuc2Nyb2xsRWwpIHtcbiAgICAgIGNvbnN0IHNjcm9sbEJveCA9IHRoaXMuc2Nyb2xsRWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICB0aGlzLnNjcm9sbEVsSW5pdGlhbCA9IHRoaXMuc2Nyb2xsRWwuc2Nyb2xsVG9wO1xuICAgICAgdGhpcy5zY3JvbGxFbFRvcCA9IHNjcm9sbEJveC50b3AgKyBBVVRPX1NDUk9MTF9NQVJHSU47XG4gICAgICB0aGlzLnNjcm9sbEVsQm90dG9tID0gc2Nyb2xsQm94LmJvdHRvbSAtIEFVVE9fU0NST0xMX01BUkdJTjtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB0aGlzLnNjcm9sbEVsSW5pdGlhbCA9IDA7XG4gICAgICB0aGlzLnNjcm9sbEVsVG9wID0gMDtcbiAgICAgIHRoaXMuc2Nyb2xsRWxCb3R0b20gPSAwO1xuICAgIH1cbiAgICB0aGlzLmxhc3RUb0luZGV4ID0gaW5kZXhGb3JJdGVtKGl0ZW0pO1xuICAgIHRoaXMuc2VsZWN0ZWRJdGVtSGVpZ2h0ID0gaXRlbS5vZmZzZXRIZWlnaHQ7XG4gICAgdGhpcy5zdGF0ZSA9IDEgLyogUmVvcmRlckdyb3VwU3RhdGUuQWN0aXZlICovO1xuICAgIGl0ZW0uY2xhc3NMaXN0LmFkZChJVEVNX1JFT1JERVJfU0VMRUNURUQpO1xuICAgIGhhcHRpY1NlbGVjdGlvblN0YXJ0KCk7XG4gIH1cbiAgb25Nb3ZlKGV2KSB7XG4gICAgY29uc3Qgc2VsZWN0ZWRJdGVtID0gdGhpcy5zZWxlY3RlZEl0ZW1FbDtcbiAgICBpZiAoIXNlbGVjdGVkSXRlbSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBTY3JvbGwgaWYgd2UgcmVhY2ggdGhlIHNjcm9sbCBtYXJnaW5zXG4gICAgY29uc3Qgc2Nyb2xsID0gdGhpcy5hdXRvc2Nyb2xsKGV2LmN1cnJlbnRZKTtcbiAgICAvLyAvLyBHZXQgY29vcmRpbmF0ZVxuICAgIGNvbnN0IHRvcCA9IHRoaXMuY29udGFpbmVyVG9wIC0gc2Nyb2xsO1xuICAgIGNvbnN0IGJvdHRvbSA9IHRoaXMuY29udGFpbmVyQm90dG9tIC0gc2Nyb2xsO1xuICAgIGNvbnN0IGN1cnJlbnRZID0gTWF0aC5tYXgodG9wLCBNYXRoLm1pbihldi5jdXJyZW50WSwgYm90dG9tKSk7XG4gICAgY29uc3QgZGVsdGFZID0gc2Nyb2xsICsgY3VycmVudFkgLSBldi5zdGFydFk7XG4gICAgY29uc3Qgbm9ybWFsaXplZFkgPSBjdXJyZW50WSAtIHRvcDtcbiAgICBjb25zdCB0b0luZGV4ID0gdGhpcy5pdGVtSW5kZXhGb3JUb3Aobm9ybWFsaXplZFkpO1xuICAgIGlmICh0b0luZGV4ICE9PSB0aGlzLmxhc3RUb0luZGV4KSB7XG4gICAgICBjb25zdCBmcm9tSW5kZXggPSBpbmRleEZvckl0ZW0oc2VsZWN0ZWRJdGVtKTtcbiAgICAgIHRoaXMubGFzdFRvSW5kZXggPSB0b0luZGV4O1xuICAgICAgaGFwdGljU2VsZWN0aW9uQ2hhbmdlZCgpO1xuICAgICAgdGhpcy5yZW9yZGVyTW92ZShmcm9tSW5kZXgsIHRvSW5kZXgpO1xuICAgIH1cbiAgICAvLyBVcGRhdGUgc2VsZWN0ZWQgaXRlbSBwb3NpdGlvblxuICAgIHNlbGVjdGVkSXRlbS5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlWSgke2RlbHRhWX1weClgO1xuICB9XG4gIG9uRW5kKCkge1xuICAgIGNvbnN0IHNlbGVjdGVkSXRlbUVsID0gdGhpcy5zZWxlY3RlZEl0ZW1FbDtcbiAgICB0aGlzLnN0YXRlID0gMiAvKiBSZW9yZGVyR3JvdXBTdGF0ZS5Db21wbGV0ZSAqLztcbiAgICBpZiAoIXNlbGVjdGVkSXRlbUVsKSB7XG4gICAgICB0aGlzLnN0YXRlID0gMCAvKiBSZW9yZGVyR3JvdXBTdGF0ZS5JZGxlICovO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB0b0luZGV4ID0gdGhpcy5sYXN0VG9JbmRleDtcbiAgICBjb25zdCBmcm9tSW5kZXggPSBpbmRleEZvckl0ZW0oc2VsZWN0ZWRJdGVtRWwpO1xuICAgIGlmICh0b0luZGV4ID09PSBmcm9tSW5kZXgpIHtcbiAgICAgIHRoaXMuY29tcGxldGVSZW9yZGVyKCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgdGhpcy5pb25JdGVtUmVvcmRlci5lbWl0KHtcbiAgICAgICAgZnJvbTogZnJvbUluZGV4LFxuICAgICAgICB0bzogdG9JbmRleCxcbiAgICAgICAgY29tcGxldGU6IHRoaXMuY29tcGxldGVSZW9yZGVyLmJpbmQodGhpcyksXG4gICAgICB9KTtcbiAgICB9XG4gICAgaGFwdGljU2VsZWN0aW9uRW5kKCk7XG4gIH1cbiAgY29tcGxldGVSZW9yZGVyKGxpc3RPclJlb3JkZXIpIHtcbiAgICBjb25zdCBzZWxlY3RlZEl0ZW1FbCA9IHRoaXMuc2VsZWN0ZWRJdGVtRWw7XG4gICAgaWYgKHNlbGVjdGVkSXRlbUVsICYmIHRoaXMuc3RhdGUgPT09IDIgLyogUmVvcmRlckdyb3VwU3RhdGUuQ29tcGxldGUgKi8pIHtcbiAgICAgIGNvbnN0IGNoaWxkcmVuID0gdGhpcy5lbC5jaGlsZHJlbjtcbiAgICAgIGNvbnN0IGxlbiA9IGNoaWxkcmVuLmxlbmd0aDtcbiAgICAgIGNvbnN0IHRvSW5kZXggPSB0aGlzLmxhc3RUb0luZGV4O1xuICAgICAgY29uc3QgZnJvbUluZGV4ID0gaW5kZXhGb3JJdGVtKHNlbGVjdGVkSXRlbUVsKTtcbiAgICAgIC8qKlxuICAgICAgICogaW5zZXJ0QmVmb3JlIGFuZCBzZXR0aW5nIHRoZSB0cmFuc2Zvcm1cbiAgICAgICAqIG5lZWRzIHRvIGhhcHBlbiBpbiB0aGUgc2FtZSBmcmFtZSBvdGhlcndpc2VcbiAgICAgICAqIHRoZXJlIHdpbGwgYmUgYSBkdXBsaWNhdGUgdHJhbnNpdGlvbi4gVGhpcyBwcmltYXJpbHlcbiAgICAgICAqIGltcGFjdHMgRmlyZWZveCB3aGVyZSBpbnNlcnRCZWZvcmUgYW5kIHRyYW5zZm9ybSBvcGVyYXRpb25zXG4gICAgICAgKiBhcmUgaGFwcGVuaW5nIGluIHR3byBzZXBhcmF0ZSBmcmFtZXMuXG4gICAgICAgKi9cbiAgICAgIHJhZigoKSA9PiB7XG4gICAgICAgIGlmICh0b0luZGV4ICE9PSBmcm9tSW5kZXggJiYgKGxpc3RPclJlb3JkZXIgPT09IHVuZGVmaW5lZCB8fCBsaXN0T3JSZW9yZGVyID09PSB0cnVlKSkge1xuICAgICAgICAgIGNvbnN0IHJlZiA9IGZyb21JbmRleCA8IHRvSW5kZXggPyBjaGlsZHJlblt0b0luZGV4ICsgMV0gOiBjaGlsZHJlblt0b0luZGV4XTtcbiAgICAgICAgICB0aGlzLmVsLmluc2VydEJlZm9yZShzZWxlY3RlZEl0ZW1FbCwgcmVmKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgY2hpbGRyZW5baV0uc3R5bGVbJ3RyYW5zZm9ybSddID0gJyc7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkobGlzdE9yUmVvcmRlcikpIHtcbiAgICAgICAgbGlzdE9yUmVvcmRlciA9IHJlb3JkZXJBcnJheShsaXN0T3JSZW9yZGVyLCBmcm9tSW5kZXgsIHRvSW5kZXgpO1xuICAgICAgfVxuICAgICAgc2VsZWN0ZWRJdGVtRWwuc3R5bGUudHJhbnNpdGlvbiA9ICcnO1xuICAgICAgc2VsZWN0ZWRJdGVtRWwuY2xhc3NMaXN0LnJlbW92ZShJVEVNX1JFT1JERVJfU0VMRUNURUQpO1xuICAgICAgdGhpcy5zZWxlY3RlZEl0ZW1FbCA9IHVuZGVmaW5lZDtcbiAgICAgIHRoaXMuc3RhdGUgPSAwIC8qIFJlb3JkZXJHcm91cFN0YXRlLklkbGUgKi87XG4gICAgfVxuICAgIHJldHVybiBsaXN0T3JSZW9yZGVyO1xuICB9XG4gIGl0ZW1JbmRleEZvclRvcChkZWx0YVkpIHtcbiAgICBjb25zdCBoZWlnaHRzID0gdGhpcy5jYWNoZWRIZWlnaHRzO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaGVpZ2h0cy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGhlaWdodHNbaV0gPiBkZWx0YVkpIHtcbiAgICAgICAgcmV0dXJuIGk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBoZWlnaHRzLmxlbmd0aCAtIDE7XG4gIH1cbiAgLyoqKioqKioqKiBET00gV1JJVEUgKioqKioqKioqICovXG4gIHJlb3JkZXJNb3ZlKGZyb21JbmRleCwgdG9JbmRleCkge1xuICAgIGNvbnN0IGl0ZW1IZWlnaHQgPSB0aGlzLnNlbGVjdGVkSXRlbUhlaWdodDtcbiAgICBjb25zdCBjaGlsZHJlbiA9IHRoaXMuZWwuY2hpbGRyZW47XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3Qgc3R5bGUgPSBjaGlsZHJlbltpXS5zdHlsZTtcbiAgICAgIGxldCB2YWx1ZSA9ICcnO1xuICAgICAgaWYgKGkgPiBmcm9tSW5kZXggJiYgaSA8PSB0b0luZGV4KSB7XG4gICAgICAgIHZhbHVlID0gYHRyYW5zbGF0ZVkoJHstaXRlbUhlaWdodH1weClgO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAoaSA8IGZyb21JbmRleCAmJiBpID49IHRvSW5kZXgpIHtcbiAgICAgICAgdmFsdWUgPSBgdHJhbnNsYXRlWSgke2l0ZW1IZWlnaHR9cHgpYDtcbiAgICAgIH1cbiAgICAgIHN0eWxlWyd0cmFuc2Zvcm0nXSA9IHZhbHVlO1xuICAgIH1cbiAgfVxuICBhdXRvc2Nyb2xsKHBvc1kpIHtcbiAgICBpZiAoIXRoaXMuc2Nyb2xsRWwpIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICBsZXQgYW1vdW50ID0gMDtcbiAgICBpZiAocG9zWSA8IHRoaXMuc2Nyb2xsRWxUb3ApIHtcbiAgICAgIGFtb3VudCA9IC1TQ1JPTExfSlVNUDtcbiAgICB9XG4gICAgZWxzZSBpZiAocG9zWSA+IHRoaXMuc2Nyb2xsRWxCb3R0b20pIHtcbiAgICAgIGFtb3VudCA9IFNDUk9MTF9KVU1QO1xuICAgIH1cbiAgICBpZiAoYW1vdW50ICE9PSAwKSB7XG4gICAgICB0aGlzLnNjcm9sbEVsLnNjcm9sbEJ5KDAsIGFtb3VudCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNjcm9sbEVsLnNjcm9sbFRvcCAtIHRoaXMuc2Nyb2xsRWxJbml0aWFsO1xuICB9XG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCBtb2RlID0gZ2V0SW9uTW9kZSh0aGlzKTtcbiAgICByZXR1cm4gKGgoSG9zdCwgeyBjbGFzczoge1xuICAgICAgICBbbW9kZV06IHRydWUsXG4gICAgICAgICdyZW9yZGVyLWVuYWJsZWQnOiAhdGhpcy5kaXNhYmxlZCxcbiAgICAgICAgJ3Jlb3JkZXItbGlzdC1hY3RpdmUnOiB0aGlzLnN0YXRlICE9PSAwIC8qIFJlb3JkZXJHcm91cFN0YXRlLklkbGUgKi8sXG4gICAgICB9IH0pKTtcbiAgfVxuICBnZXQgZWwoKSB7IHJldHVybiBnZXRFbGVtZW50KHRoaXMpOyB9XG4gIHN0YXRpYyBnZXQgd2F0Y2hlcnMoKSB7IHJldHVybiB7XG4gICAgXCJkaXNhYmxlZFwiOiBbXCJkaXNhYmxlZENoYW5nZWRcIl1cbiAgfTsgfVxufTtcbmNvbnN0IGluZGV4Rm9ySXRlbSA9IChlbGVtZW50KSA9PiB7XG4gIHJldHVybiBlbGVtZW50WyckaW9uSW5kZXgnXTtcbn07XG5jb25zdCBmaW5kUmVvcmRlckl0ZW0gPSAobm9kZSwgY29udGFpbmVyKSA9PiB7XG4gIGxldCBwYXJlbnQ7XG4gIHdoaWxlIChub2RlKSB7XG4gICAgcGFyZW50ID0gbm9kZS5wYXJlbnRFbGVtZW50O1xuICAgIGlmIChwYXJlbnQgPT09IGNvbnRhaW5lcikge1xuICAgICAgcmV0dXJuIG5vZGU7XG4gICAgfVxuICAgIG5vZGUgPSBwYXJlbnQ7XG4gIH1cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn07XG5jb25zdCBBVVRPX1NDUk9MTF9NQVJHSU4gPSA2MDtcbmNvbnN0IFNDUk9MTF9KVU1QID0gMTA7XG5jb25zdCBJVEVNX1JFT1JERVJfU0VMRUNURUQgPSAncmVvcmRlci1zZWxlY3RlZCc7XG5jb25zdCByZW9yZGVyQXJyYXkgPSAoYXJyYXksIGZyb20sIHRvKSA9PiB7XG4gIGNvbnN0IGVsZW1lbnQgPSBhcnJheVtmcm9tXTtcbiAgYXJyYXkuc3BsaWNlKGZyb20sIDEpO1xuICBhcnJheS5zcGxpY2UodG8sIDAsIGVsZW1lbnQpO1xuICByZXR1cm4gYXJyYXkuc2xpY2UoKTtcbn07XG5SZW9yZGVyR3JvdXAuc3R5bGUgPSByZW9yZGVyR3JvdXBDc3M7XG5cbmV4cG9ydCB7IFJlb3JkZXIgYXMgaW9uX3Jlb3JkZXIsIFJlb3JkZXJHcm91cCBhcyBpb25fcmVvcmRlcl9ncm91cCB9O1xuIl0sIm5hbWVzIjpbInByaW50SW9uV2FybmluZyIsIm1lc3NhZ2UiLCJwYXJhbXMiLCJjb25zb2xlIiwid2FybiIsInByaW50SW9uRXJyb3IiLCJlcnJvciIsInByaW50UmVxdWlyZWRFbGVtZW50RXJyb3IiLCJlbCIsInRhcmdldFNlbGVjdG9ycyIsInRhZ05hbWUiLCJ0b0xvd2VyQ2FzZSIsImpvaW4iLCJhIiwiYiIsInAiLCJyIiwicmVnaXN0ZXJJbnN0YW5jZSIsImgiLCJIIiwiSG9zdCIsImkiLCJnZXRFbGVtZW50IiwiZSIsImNyZWF0ZUV2ZW50IiwiaiIsInJlb3JkZXJUaHJlZU91dGxpbmUiLCJrIiwicmVvcmRlclR3b1NoYXJwIiwiZ2V0SW9uTW9kZSIsImYiLCJmaW5kQ2xvc2VzdElvbkNvbnRlbnQiLCJnIiwiZ2V0U2Nyb2xsRWxlbWVudCIsInJhZiIsImhhcHRpY1NlbGVjdGlvblN0YXJ0IiwiaGFwdGljU2VsZWN0aW9uQ2hhbmdlZCIsImhhcHRpY1NlbGVjdGlvbkVuZCIsInJlb3JkZXJJb3NDc3MiLCJyZW9yZGVyTWRDc3MiLCJSZW9yZGVyIiwiY29uc3RydWN0b3IiLCJob3N0UmVmIiwib25DbGljayIsImV2IiwicmVvcmRlckdyb3VwIiwiY2xvc2VzdCIsInByZXZlbnREZWZhdWx0IiwiZGlzYWJsZWQiLCJzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24iLCJyZW5kZXIiLCJtb2RlIiwicmVvcmRlckljb24iLCJjbGFzcyIsImljb24iLCJsYXp5IiwicGFydCIsInN0eWxlIiwiaW9zIiwibWQiLCJyZW9yZGVyR3JvdXBDc3MiLCJSZW9yZGVyR3JvdXAiLCJpb25JdGVtUmVvcmRlciIsImxhc3RUb0luZGV4IiwiY2FjaGVkSGVpZ2h0cyIsInNjcm9sbEVsVG9wIiwic2Nyb2xsRWxCb3R0b20iLCJzY3JvbGxFbEluaXRpYWwiLCJjb250YWluZXJUb3AiLCJjb250YWluZXJCb3R0b20iLCJzdGF0ZSIsImRpc2FibGVkQ2hhbmdlZCIsImdlc3R1cmUiLCJlbmFibGUiLCJjb25uZWN0ZWRDYWxsYmFjayIsImNvbnRlbnRFbCIsInNjcm9sbEVsIiwiY3JlYXRlR2VzdHVyZSIsImdlc3R1cmVOYW1lIiwiZ2VzdHVyZVByaW9yaXR5IiwidGhyZXNob2xkIiwiZGlyZWN0aW9uIiwicGFzc2l2ZSIsImNhblN0YXJ0IiwiZGV0YWlsIiwib25TdGFydCIsIm9uTW92ZSIsIm9uRW5kIiwiZGlzY29ubmVjdGVkQ2FsbGJhY2siLCJkZXN0cm95IiwidW5kZWZpbmVkIiwiY29tcGxldGUiLCJsaXN0T3JSZW9yZGVyIiwiUHJvbWlzZSIsInJlc29sdmUiLCJjb21wbGV0ZVJlb3JkZXIiLCJzZWxlY3RlZEl0ZW1FbCIsInRhcmdldCIsImV2ZW50IiwicmVvcmRlckVsIiwiaXRlbSIsImZpbmRSZW9yZGVySXRlbSIsImRhdGEiLCJoZWlnaHRzIiwibGVuZ3RoIiwiY2hpbGRyZW4iLCJzdW0iLCJjaGlsZCIsIm9mZnNldEhlaWdodCIsInB1c2giLCIkaW9uSW5kZXgiLCJib3giLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ0b3AiLCJib3R0b20iLCJzY3JvbGxCb3giLCJzY3JvbGxUb3AiLCJBVVRPX1NDUk9MTF9NQVJHSU4iLCJpbmRleEZvckl0ZW0iLCJzZWxlY3RlZEl0ZW1IZWlnaHQiLCJjbGFzc0xpc3QiLCJhZGQiLCJJVEVNX1JFT1JERVJfU0VMRUNURUQiLCJzZWxlY3RlZEl0ZW0iLCJzY3JvbGwiLCJhdXRvc2Nyb2xsIiwiY3VycmVudFkiLCJNYXRoIiwibWF4IiwibWluIiwiZGVsdGFZIiwic3RhcnRZIiwibm9ybWFsaXplZFkiLCJ0b0luZGV4IiwiaXRlbUluZGV4Rm9yVG9wIiwiZnJvbUluZGV4IiwicmVvcmRlck1vdmUiLCJ0cmFuc2Zvcm0iLCJlbWl0IiwiZnJvbSIsInRvIiwiYmluZCIsImxlbiIsInJlZiIsImluc2VydEJlZm9yZSIsIkFycmF5IiwiaXNBcnJheSIsInJlb3JkZXJBcnJheSIsInRyYW5zaXRpb24iLCJyZW1vdmUiLCJpdGVtSGVpZ2h0IiwidmFsdWUiLCJwb3NZIiwiYW1vdW50IiwiU0NST0xMX0pVTVAiLCJzY3JvbGxCeSIsIndhdGNoZXJzIiwiZWxlbWVudCIsIm5vZGUiLCJjb250YWluZXIiLCJwYXJlbnQiLCJwYXJlbnRFbGVtZW50IiwiYXJyYXkiLCJzcGxpY2UiLCJzbGljZSIsImlvbl9yZW9yZGVyIiwiaW9uX3Jlb3JkZXJfZ3JvdXAiXSwic291cmNlUm9vdCI6IndlYnBhY2s6Ly8vIiwieF9nb29nbGVfaWdub3JlTGlzdCI6WzAsMV19